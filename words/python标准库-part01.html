<html>
    <head>
        <meta charset="utf-8">
        
    
        <title> pythonæ ‡å‡†åº“-part01 </title>
        <meta name="google-site-verification" content="xTBu05X0P9OJkoWvQWGdZimRp6nD6uqesWwTJ6v-BoA" />
        <meta name="google-site-verification" content="7Obwo8u7tT_NKgyJiirEB1qRpINEnh9BtyBa1WtiVjU" />
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="/assets/global.css">
        <link rel="stylesheet" href="/assets/theme.css">
        <link rel="stylesheet" href="/assets/semantic/components/button.min.css">
        <link rel="stylesheet" href="/assets/semantic/components/icon.min.css">
        <link rel="stylesheet" href="/assets/semantic/components/card.min.css">
        <link rel="stylesheet" href="/assets/semantic/components/list.min.css">
        <link rel="stylesheet" href="/assets/semantic/components/container.min.css">
        <link rel="stylesheet" href="/assets/semantic/components/input.min.css">
        <link rel="shortcut icon" href="/assets/images/favicon.ico" type="image/x-icon">
        <link rel="apple-touch-icon" sizes="128x128" href="/assets/images/favicon.ico">
        <link rel="icon" href="/assets/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="/assets/words.css">
    <link rel="stylesheet" href="/assets/monokai.css">
    <link rel="stylesheet" href="/assets/3rd/gitalk.css">
    <link rel="stylesheet" href="/assets/semantic/components/table.min.css">


        <style type="text/css"> 
        </style>
    </head>
    
    <body class="sk-default">
        <div id="site-wrapper" style="display: none;" class="topwrapper">
            <div class="ui container">
                <h3><span style="color: #fff;">ä¸»é¢˜é€‰æ‹©</span></h3>
                <table id="theme" style="width: 100%; color: #fff; margin-left: auto; margin-right: auto;">
                        <tbody>
                            <tr class="sk-mo" onclick="document.body.className = 'sk-mo'; localStorage.setItem('skin', 'sk-mo');">
                                <td class="title">å¢¨</td>
                                <td width="50%;"><div style="width: 100%;height: 25px; background: var(--main-bg);" class="bg"></div></td>
                            </tr>
                            <tr class="sk-green" onclick="document.body.className = 'sk-green'; localStorage.setItem('skin', 'sk-green');">
                                <td class="title">ç»¿</td>
                                <td width="50%;"><div style="width: 100%;height: 25px; background: var(--main-bg);" class="bg"></div></td>
                            </tr>
                            <tr class="sk-default" onclick="document.body.className = 'sk-default'; localStorage.setItem('skin', 'sk-default');">
                                <td class="title">é’</td>
                                <td width="50%;"><div style="width: 100%;height: 25px; background: var(--main-bg);" class="bg"></div></td>
                            </tr>
                            <tr class="sk-orange" onclick="document.body.className = 'sk-orange'; localStorage.setItem('skin', 'sk-orange');">
                                <td class="title">æ©˜</td>
                                <td width="50%;"><div style="width: 100%;height: 25px; background: var(--main-bg);" class="bg ">
                                </div></td>
                            </tr>
                        </tbody>
                    </table>
            </div>
        </div>
        <div id="cats-wrapper" style="display: none;" class="topwrapper">
            <div class="ui container">
                <table style="color: #fff;">
                    <tbody>
                        <tr>
                            <td valign="middle" align="center" width="50%">
                                <img src="/assets/cat-bn-avatar.jpeg" />
                                <div class="name">æ³¢å¦</div>
                                <div class="time">2017å¹´2æœˆ21å·</div>
                            </td>
                            <td valign="middle" align="center" width="50%">
                                <img src="/assets/cat-ss-avatar.png" />
                                <div class="name">ä¸‰ä¸‰</div>
                                <div class="time">2017å¹´4æœˆ10å·</div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
        </div>
        <div id="donation-wrapper" style="display: none;" class="topwrapper">
            <div class="ui container" style="text-align: center;">
                <div class="description">
                    <i class="teal quote left icon"></i>
                    å¦‚æœè§‰å¾—æˆ‘çš„æ–‡ç« å¯¹æ‚¨æœ‰ç”¨ï¼Œè¯·éšæ„æ‰“èµã€‚æ‚¨çš„æ”¯æŒå°†é¼“åŠ±æˆ‘ç»§ç»­åˆ›ä½œ!
                    <i class="teal quote right icon"></i>
                </div>

                <div class="ui buttons">
                    <button onclick="useWechat()" id="wechat" class="ui active secondary icon button">
                        å¾®ä¿¡
                    </button>
                    <button onclick="useAlipay()" id="alipay" class="ui secondary icon button">
                        æ”¯ä»˜å®
                    </button>
                </div>

                <div id="donation-qrcode">
                    <img id="wechat-qrcode-image" src="/assets/images/wechat.png">
                    <img id="alipay-qrcode-image" src="/assets/images/alipay.jpg">
                    <!-- <img id="donation-qrcode-image" src="/assets/images/wechat.png"> -->
                </div>
            </div>
        </div>

        <div id="social-links-wrapper" style="display: none;" class="topwrapper">
            <a href="mailto:1426409836@qq.com">
                <button class="ui mini red circular icon button">
                    <i class="mail icon"></i>
                </button>
            </a>
            <a href="https://github.com/willdx">
                <button class="ui mini grey circular github icon button">
                  <i class="github icon"></i>
                </button>
            </a>





            <button onclick="toggleWechat()" class="ui mini green circular icon button">
                <i class="wechat icon"></i>
            </button>
            
            <div id="wx" style="display: none;">
                <img src="/assets/images/wx.jpeg" />
            </div>
        </div>

        <div id="search-wrapper" style="display: none;" class="topwrapper">
            <div id="search" class="ui container">
              <input id="searchInput" onkeypress="return search(event)" type="search" placeholder="Search with google...">
            </div>
        </div>

        <div id="topbar"></div>

        <div id="triggers-wrapper">
            <div class="ui black mini buttons">
                <button onclick="toggleById(wrappers, 'site-wrapper')" class="ui secondary site-wrapper icon button">
                    <i class="snowflake icon"></i>
                </button>
    
                <button onclick="toggleById(wrappers, 'social-links-wrapper')" class="ui secondary social-links-wrapper icon button">
                    <i class="linkify icon"></i>
                </button>
                <button onclick="toggleById(wrappers, 'search-wrapper')" class="ui secondary search-wrapper icon button">
                    <i class="search icon"></i>
                </button>
                <!--
                <button onclick="toggleById(wrappers, 'cats-wrapper')" class="ui secondary cats-wrapper icon button">
                    ğŸ±
                </button>
                -->
                <button onclick="toggleById(wrappers, 'donation-wrapper')" class="ui secondary donation-wrapper icon button">
                    <i class="heart icon"></i>
                </button>
            </div>
        </div> 
    
        <div id="main">
            <div class="me">
                <div class="avatar">
                    <img src="/assets/images/avatar.png">
                </div>
    
                <h2 class="name">Will Dx</h2>

                <span class="sign">äººä¸–ä¸€èº«éœœé›ª, å½’æ¥ä»æ˜¯å°‘å¹´.</span>
            </div>
            
            <div class="top menu">
                <div class="ui horizontal bulleted link list">
                    <a href="/" class="item">
                        ä¸»é¡µ
                    </a>
                    <a href="/tweet.html" class="item">
                        æ¨ç‰¹
                    </a>
                    <a href="/about.html" class="item">
                        å…³äºæˆ‘
                    </a>
                    <a href="#social-links-wrapper" style="cursor: pointer;" class="item" onclick="toggleById(wrappers, 'social-links-wrapper')">
                        è”ç³»
                    </a>
                    <a href="/rss.xml" class="item">
                        RSS 
                    </a>
                </div>
            </div>

            
<div id="content" class="typo ui container">
    <div id="article">
        <h1>pythonæ ‡å‡†åº“-part01</h1>
        <h4>Posted April 07, 2017</h4>
        <h2>ä»£ç æ¥æº</h2>

<p><a href="http://www.liaoxuefeng.com/wiki/001374738125095c955c1e6d8bb493182103fac9270762a000/001407499098340324a6232bfee42348849d53c90576747000">å»–é›ªå³°è€å¸ˆ</a>
<a href="http://book.pythontips.com/en/latest/one_liners.html">pythontips</a></p>

<h2>1.collectionså†…å»ºé›†åˆæ¨¡å—</h2>

<h3>namedtupleç”¨å…ƒç»„æŠ½è±¡æ•°æ®</h3>
<blockquote class="blockquote-normal">
                <p>namedtupleæ˜¯ä¸€ä¸ªå‡½æ•°,å®ƒç”¨æ¥åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„tupleå¯¹è±¡,å¹¶ä¸”è§„å®šäº†tupleå…ƒç´ çš„ä¸ªæ•°,å¹¶å¯ä»¥ç”¨å±æ€§è€Œä¸æ˜¯ç´¢å¼•æ¥å¼•ç”¨tupleçš„æŸä¸ªå…ƒç´ ;è¿™æ ·ä¸€æ¥,æˆ‘ä»¬ç”¨namedtupleå¯ä»¥å¾ˆæ–¹ä¾¿åœ°å®šä¹‰ä¸€ç§æ•°æ®ç±»å‹,å®ƒå…·å¤‡tupleçš„ä¸å˜æ€§,åˆå¯ä»¥æ ¹æ®å±æ€§æ¥å¼•ç”¨,ä½¿ç”¨ååˆ†æ–¹ä¾¿;</p></blockquote><div class="code-wrapper"><div class="lang-label">Python</div><div class="highlight"><pre><span></span><span class="c1"># æ¨¡æ‹ŸäºŒç»´åæ ‡</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">namedtuple</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="n">Point</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s2">&quot;Point&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">])</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">4</span><span class="p">]:</span> <span class="n">p</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">5</span><span class="p">]:</span> <span class="n">p</span><span class="o">.</span><span class="n">x</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">5</span><span class="p">]:</span> <span class="mi">1</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">6</span><span class="p">]:</span> <span class="n">p</span><span class="o">.</span><span class="n">y</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">6</span><span class="p">]:</span> <span class="mi">2</span>

<span class="c1"># ä½¿ç”¨åæ ‡å’ŒåŠå¾„æ¨¡æ‹Ÿä¸€ä¸ªåœ†</span>
<span class="n">Circle</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s1">&#39;Circle&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">])</span>
</pre></div>
</div>
<h3>è¡¥å……01:æšä¸¾ç±»å‹ python3.4+</h3>
<blockquote class="blockquote-normal">
                <p>Enumå¯ä»¥æŠŠä¸€ç»„ç›¸å…³å¸¸é‡å®šä¹‰åœ¨ä¸€ä¸ªclassä¸­,ä¸”classä¸å¯å˜,è€Œä¸”æˆå‘˜å¯ä»¥ç›´æ¥æ¯”è¾ƒ</p></blockquote><div class="code-wrapper"><div class="lang-label">Python</div><div class="highlight"><pre><span></span><span class="err">âœ</span>  <span class="o">~</span> <span class="n">python</span>
<span class="n">Python</span> <span class="mf">3.5</span><span class="o">.</span><span class="mi">1</span> <span class="p">(</span><span class="n">default</span><span class="p">,</span> <span class="n">Jun</span> <span class="mi">28</span> <span class="mi">2016</span><span class="p">,</span> <span class="mi">11</span><span class="p">:</span><span class="mi">15</span><span class="p">:</span><span class="mi">26</span><span class="p">)</span>
<span class="p">[</span><span class="n">GCC</span> <span class="mf">4.2</span><span class="o">.</span><span class="mi">1</span> <span class="n">Compatible</span> <span class="n">Apple</span> <span class="n">LLVM</span> <span class="mf">7.3</span><span class="o">.</span><span class="mi">0</span> <span class="p">(</span><span class="n">clang</span><span class="o">-</span><span class="mf">703.0</span><span class="o">.</span><span class="mi">31</span><span class="p">)]</span> <span class="n">on</span> <span class="n">darwin</span>
<span class="n">Type</span> <span class="s2">&quot;help&quot;</span><span class="p">,</span> <span class="s2">&quot;copyright&quot;</span><span class="p">,</span> <span class="s2">&quot;credits&quot;</span> <span class="ow">or</span> <span class="s2">&quot;license&quot;</span> <span class="k">for</span> <span class="n">more</span> <span class="n">information</span><span class="o">.</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">enum</span> <span class="kn">import</span> <span class="n">Enum</span><span class="p">,</span> <span class="n">unique</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">Month</span> <span class="o">=</span> <span class="n">Enum</span><span class="p">(</span><span class="s1">&#39;Month&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;Jan&#39;</span><span class="p">,</span> <span class="s1">&#39;Feb&#39;</span><span class="p">,</span> <span class="s1">&#39;Mar&#39;</span><span class="p">,</span> <span class="s1">&#39;Apr&#39;</span><span class="p">,</span> <span class="s1">&#39;May&#39;</span><span class="p">,</span> <span class="s1">&#39;Jun&#39;</span><span class="p">,</span> <span class="s1">&#39;Jul&#39;</span><span class="p">,</span> <span class="s1">&#39;Aug&#39;</span><span class="p">,</span> <span class="s1">&#39;Sep&#39;</span><span class="p">,</span> <span class="s1">&#39;Oct&#39;</span><span class="p">,</span> <span class="s1">&#39;Nov&#39;</span><span class="p">,</span> <span class="s1">&#39;Dec&#39;</span><span class="p">))</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">Month</span><span class="o">.</span><span class="n">__members__</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
<span class="n">odict_items</span><span class="p">([(</span><span class="s1">&#39;Jan&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Month</span><span class="o">.</span><span class="n">Jan</span><span class="p">:</span> <span class="mi">1</span><span class="o">&gt;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;Feb&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Month</span><span class="o">.</span><span class="n">Feb</span><span class="p">:</span> <span class="mi">2</span><span class="o">&gt;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;Mar&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Month</span><span class="o">.</span><span class="n">Mar</span><span class="p">:</span> <span class="mi">3</span><span class="o">&gt;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;Apr&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Month</span><span class="o">.</span><span class="n">Apr</span><span class="p">:</span> <span class="mi">4</span><span class="o">&gt;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;May&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Month</span><span class="o">.</span><span class="n">May</span><span class="p">:</span> <span class="mi">5</span><span class="o">&gt;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;Jun&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Month</span><span class="o">.</span><span class="n">Jun</span><span class="p">:</span> <span class="mi">6</span><span class="o">&gt;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;Jul&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Month</span><span class="o">.</span><span class="n">Jul</span><span class="p">:</span> <span class="mi">7</span><span class="o">&gt;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;Aug&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Month</span><span class="o">.</span><span class="n">Aug</span><span class="p">:</span> <span class="mi">8</span><span class="o">&gt;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;Sep&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Month</span><span class="o">.</span><span class="n">Sep</span><span class="p">:</span> <span class="mi">9</span><span class="o">&gt;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;Oct&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Month</span><span class="o">.</span><span class="n">Oct</span><span class="p">:</span> <span class="mi">10</span><span class="o">&gt;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;Nov&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Month</span><span class="o">.</span><span class="n">Nov</span><span class="p">:</span> <span class="mi">11</span><span class="o">&gt;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;Dec&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Month</span><span class="o">.</span><span class="n">Dec</span><span class="p">:</span> <span class="mi">12</span><span class="o">&gt;</span><span class="p">)])</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="n">Month</span><span class="o">.</span><span class="n">Jan</span><span class="p">)</span>
<span class="n">Month</span><span class="o">.</span><span class="n">Jan</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="n">Month</span><span class="o">.</span><span class="n">Jan</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="mi">1</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="n">Month</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
<span class="n">Month</span><span class="o">.</span><span class="n">Jan</span>
</pre></div>
</div>
<h3>è¡¥å……02:Enumerateå¸¦indexçš„å¯è¿­ä»£å¯¹è±¡</h3>
<div class="code-wrapper"><div class="lang-label">Python</div><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">counter</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">some_list</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">counter</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</pre></div>
</div>
<h3>dequeåŒå‘åˆ—è¡¨</h3>
<blockquote class="blockquote-normal">
                <p>ä½¿ç”¨listå­˜å‚¨æ•°æ®æ—¶,æŒ‰ç´¢å¼•è®¿é—®å…ƒç´ å¾ˆå¿«,ä½†æ˜¯æ’å…¥å’Œåˆ é™¤å…ƒç´ å°±å¾ˆæ…¢äº†,å› ä¸ºlistæ˜¯çº¿æ€§å­˜å‚¨,æ•°æ®é‡å¤§çš„æ—¶å€™,æ’å…¥å’Œåˆ é™¤æ•ˆç‡å¾ˆä½;</p><br/><p>dequeæ˜¯ä¸ºäº†é«˜æ•ˆå®ç°æ’å…¥å’Œåˆ é™¤æ“ä½œçš„åŒå‘åˆ—è¡¨,é€‚åˆç”¨äºé˜Ÿåˆ—å’Œæ ˆ;</p></blockquote><div class="code-wrapper"><div class="lang-label">Python</div><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">7</span><span class="p">]:</span> <span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">deque</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">8</span><span class="p">]:</span> <span class="n">q</span> <span class="o">=</span> <span class="n">deque</span><span class="p">([</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">])</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">9</span><span class="p">]:</span> <span class="n">q</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">)</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">10</span><span class="p">]:</span> <span class="n">q</span><span class="o">.</span><span class="n">appendleft</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">)</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">11</span><span class="p">]:</span> <span class="nb">type</span><span class="p">(</span><span class="n">q</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">11</span><span class="p">]:</span> <span class="n">collections</span><span class="o">.</span><span class="n">deque</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">12</span><span class="p">]:</span> <span class="n">q</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">12</span><span class="p">]:</span> <span class="n">deque</span><span class="p">([</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">])</span>
</pre></div>
</div>
<h3>defaultdictå­—å…¸åŠŸèƒ½å¢å¼º</h3>
<blockquote class="blockquote-normal">
                <p>æ³¨æ„defaultdictæ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°</p><br/><p>ä½¿ç”¨dictæ—¶,å¦‚æœå¼•ç”¨çš„Keyä¸å­˜åœ¨,å°±ä¼šæŠ›å‡ºKeyError. å¦‚æœå¸Œæœ›keyä¸å­˜åœ¨æ—¶,è¿”å›ä¸€ä¸ªé»˜è®¤å€¼,å°±å¯ä»¥ç”¨defaultdict</p></blockquote><div class="code-wrapper"><div class="lang-label">Python</div><div class="highlight"><pre><span></span><span class="c1"># defaultdictç»™å­—å…¸æ·»åŠ é»˜è®¤å€¼</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">13</span><span class="p">]:</span> <span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">defaultdict</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">14</span><span class="p">]:</span> <span class="n">dd</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="s1">&#39;default&#39;</span><span class="p">)</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">15</span><span class="p">]:</span> <span class="n">dd</span><span class="p">[</span><span class="s2">&quot;key1&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;value1&quot;</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">16</span><span class="p">]:</span> <span class="n">dd</span><span class="p">[</span><span class="s2">&quot;key1&quot;</span><span class="p">]</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">16</span><span class="p">]:</span> <span class="s1">&#39;value1&#39;</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">17</span><span class="p">]:</span> <span class="n">dd</span><span class="p">[</span><span class="s2">&quot;key2&quot;</span><span class="p">]</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">17</span><span class="p">]:</span> <span class="s1">&#39;default&#39;</span>
</pre></div>
</div><div class="code-wrapper"><div class="lang-label">Python</div><div class="highlight"><pre><span></span><span class="c1"># defaultdictå®ç°å°†ç›¸åŒkeyçš„valueåˆå¹¶</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">defaultdict</span>
<span class="n">colours</span> <span class="o">=</span> <span class="p">(</span>
    <span class="p">(</span><span class="s1">&#39;Yasoob&#39;</span><span class="p">,</span> <span class="s1">&#39;Yellow&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;Ali&#39;</span><span class="p">,</span> <span class="s1">&#39;Blue&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;Arham&#39;</span><span class="p">,</span> <span class="s1">&#39;Green&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;Ali&#39;</span><span class="p">,</span> <span class="s1">&#39;Black&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;Yasoob&#39;</span><span class="p">,</span> <span class="s1">&#39;Red&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;Ahmed&#39;</span><span class="p">,</span> <span class="s1">&#39;Silver&#39;</span><span class="p">),</span>
<span class="p">)</span>
<span class="n">favourite_colours</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
<span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">colour</span> <span class="ow">in</span> <span class="n">colours</span><span class="p">:</span>
    <span class="n">favourite_colours</span><span class="p">[</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">colour</span><span class="p">)</span>

<span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">favourite_colours</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
    <span class="k">print</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span>
<span class="c1"># ç»“æœ</span>
<span class="n">Arham</span> <span class="p">[</span><span class="s1">&#39;Green&#39;</span><span class="p">]</span>
<span class="n">Yasoob</span> <span class="p">[</span><span class="s1">&#39;Yellow&#39;</span><span class="p">,</span> <span class="s1">&#39;Red&#39;</span><span class="p">]</span>
<span class="n">Ahmed</span> <span class="p">[</span><span class="s1">&#39;Silver&#39;</span><span class="p">]</span>
<span class="n">Ali</span> <span class="p">[</span><span class="s1">&#39;Blue&#39;</span><span class="p">,</span> <span class="s1">&#39;Black&#39;</span><span class="p">]</span>
</pre></div>
</div><div class="code-wrapper"><div class="lang-label">Python</div><div class="highlight"><pre><span></span><span class="c1"># è§£å†³å¤šå±‚åµŒå¥—å­—å…¸keyErroré—®é¢˜</span>
<span class="c1">## Problem:</span>
<span class="n">some_dict</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">some_dict</span><span class="p">[</span><span class="s1">&#39;colours&#39;</span><span class="p">][</span><span class="s1">&#39;favourite&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;yellow&quot;</span>
<span class="c1"># Raises KeyError: &#39;colours&#39;</span>

<span class="c1">## Solution:</span>
<span class="kn">import</span> <span class="nn">collections</span>
<span class="n">tree</span> <span class="o">=</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">collections</span><span class="o">.</span><span class="n">defaultdict</span><span class="p">(</span><span class="n">tree</span><span class="p">)</span> <span class="c1"># é€’å½’è°ƒç”¨tree</span>
<span class="n">some_dict</span> <span class="o">=</span> <span class="n">tree</span><span class="p">()</span> <span class="c1"># some_dictæ˜¯ä¸€ä¸ªdefaultdictçš„é€’å½’å‡½æ•°</span>
<span class="n">some_dict</span><span class="p">[</span><span class="s1">&#39;colours&#39;</span><span class="p">][</span><span class="s1">&#39;favourite&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;yellow&quot;</span> <span class="c1"># defaultdictå’Œdictæ“ä½œç±»ä¼¼</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="k">print</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">some_dict</span><span class="p">))</span>
<span class="c1"># Output: {&quot;colours&quot;: {&quot;favourite&quot;: &quot;yellow&quot;}}</span>
</pre></div>
</div>
<h3>OrderedDictå®ç°æœ‰åºå­—å…¸</h3>
<div class="code-wrapper"><div class="lang-label">Python</div><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">24</span><span class="p">]:</span> <span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">OrderedDict</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">25</span><span class="p">]:</span> <span class="n">d</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">([(</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)])</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">26</span><span class="p">]:</span> <span class="n">d</span> <span class="c1"># ä¼šæŒ‰ç…§keyè¿›è¡Œä¸€æ¬¡é»˜è®¤æ’åºåè¾“å‡º</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">26</span><span class="p">]:</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">27</span><span class="p">]:</span>  <span class="n">od</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">([(</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)])</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">28</span><span class="p">]:</span> <span class="n">od</span> <span class="c1"># æŒ‰ç…§è¾“å…¥çš„é¡ºåºè¾“å‡º</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">28</span><span class="p">]:</span> <span class="n">OrderedDict</span><span class="p">([(</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)])</span>
</pre></div>
</div><div class="code-wrapper"><div class="lang-label">Python</div><div class="highlight"><pre><span></span><span class="c1"># ä½¿ç”¨OrderDictå®ç°ä¸€ä¸ªFIFOçš„å­—å…¸</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">OrderedDict</span>

<span class="k">class</span> <span class="nc">LastUpdatedOrderedDict</span><span class="p">(</span><span class="n">OrderedDict</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">capacity</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">LastUpdatedOrderedDict</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_capacity</span> <span class="o">=</span> <span class="n">capacity</span>

    <span class="k">def</span> <span class="fm">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="n">containsKey</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span> <span class="k">else</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-</span> <span class="n">containsKey</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_capacity</span><span class="p">:</span>
            <span class="c1"># popitemé»˜è®¤åˆ é™¤æœ€åä¸€ä¸ªå…ƒç´ ,last=Falseåˆ™ç›¸å</span>
            <span class="n">last</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">popitem</span><span class="p">(</span><span class="n">last</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
            <span class="k">print</span> <span class="s1">&#39;remove:&#39;</span><span class="p">,</span><span class="n">last</span>
        <span class="k">if</span> <span class="n">containsKey</span><span class="p">:</span>
            <span class="k">del</span> <span class="bp">self</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
            <span class="k">print</span> <span class="s1">&#39;set:&#39;</span><span class="p">,(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">print</span> <span class="s1">&#39;add:&#39;</span><span class="p">,(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="n">OrderedDict</span><span class="o">.</span><span class="fm">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span><span class="o">==</span><span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">d</span> <span class="o">=</span> <span class="n">LastUpdatedOrderedDict</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
    <span class="n">d</span><span class="p">[</span><span class="s2">&quot;d&quot;</span><span class="p">]</span><span class="o">=</span><span class="s2">&quot;d&quot;</span>
    <span class="n">d</span><span class="p">[</span><span class="s2">&quot;c&quot;</span><span class="p">]</span><span class="o">=</span><span class="s2">&quot;c&quot;</span>
    <span class="n">d</span><span class="p">[</span><span class="s2">&quot;b&quot;</span><span class="p">]</span><span class="o">=</span><span class="s2">&quot;b&quot;</span>
    <span class="k">print</span> <span class="n">d</span>
    <span class="n">d</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">]</span><span class="o">=</span><span class="s2">&quot;a&quot;</span>
</pre></div>
</div>
<h3>Counter ç®€å•è®¡æ•°å™¨</h3>
<div class="code-wrapper"><div class="lang-label">Python</div><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">29</span><span class="p">]:</span> <span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">Counter</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">30</span><span class="p">]:</span> <span class="n">c</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">()</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">31</span><span class="p">]:</span> <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <span class="s1">&#39;programming&#39;</span><span class="p">:</span>
   <span class="o">....</span><span class="p">:</span>     <span class="n">c</span><span class="p">[</span><span class="n">ch</span><span class="p">]</span> <span class="o">=</span> <span class="n">c</span><span class="p">[</span><span class="n">ch</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">32</span><span class="p">]:</span> <span class="n">c</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">32</span><span class="p">]:</span> <span class="n">Counter</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;g&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;i&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;m&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;n&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;o&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;p&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">})</span>
</pre></div>
</div>
<h2>2.base64</h2>
<blockquote class="blockquote-normal">
                <p>Base64æ˜¯ä¸€ç§ç”¨64ä¸ªå­—ç¬¦æ¥è¡¨ç¤ºä»»æ„äºŒè¿›åˆ¶æ•°æ®çš„æ–¹æ³•,å¦‚æœæºæ•°æ®ä¸æ˜¯äºŒè¿›åˆ¶,é‚£ä¹ˆéœ€è¦å…ˆè½¬åŒ–ä¸ºäºŒè¿›åˆ¶,æ¯3ä¸ªåŸå§‹å­—ç¬¦ç»Base64ç¼–ç æˆ4ä¸ªå­—ç¬¦,å¦‚æœæºå­—ç¬¦ä¸²ä¸èƒ½è¢«3æ•´é™¤é‚£ä¹ˆç”¨0è¡¥é½,è¡¥é½éƒ¨åˆ†ä¼šè¢«è½¬åŒ–ä¸ºA,æ­¤æ—¶çš„Aæ˜¯è‡ªåŠ¨è¡¥å…¨çš„,æ²¡æœ‰å®é™…å«ä¹‰,æ‰€ä»¥æ ‡å‡†Base64ç¼–ç é€šå¸¸ç”¨ = å­—ç¬¦æ¥æ›¿æ¢æœ€åçš„ A;</p><br/><p>è§£ç æ—¶å¦‚æœå‘ç°Base64ç¼–ç å­—ç¬¦ä¸²é•¿åº¦ä¸èƒ½è¢«4æ•´é™¤ï¼Œåˆ™å…ˆè¡¥å…… = å­—ç¬¦ï¼Œå†è§£ç å³å¯</p></blockquote>
<p><p class="hassubimage"><img src="http://iwillb.imdancer.com/base64%E7%BC%96%E7%A0%81%E5%8E%9F%E7%90%86.png"></p>
                    <p class="img-title"><span class="symbol">#</span>base64ç¼–ç åŸç†å›¾è§£</p></p>
<div class="code-wrapper"><div class="lang-label">Python</div><div class="highlight"><pre><span></span><span class="c1"># Pythonå†…ç½®çš„base64å¯ä»¥ç›´æ¥è¿›è¡Œbase64çš„ç¼–è§£ç </span>
<span class="n">In</span> <span class="p">[</span><span class="mi">33</span><span class="p">]:</span> <span class="kn">import</span> <span class="nn">base64</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">34</span><span class="p">]:</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64encode</span><span class="p">(</span><span class="s2">&quot;daixiang&quot;</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">34</span><span class="p">]:</span> <span class="s1">&#39;ZGFpeGlhbmc=&#39;</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">35</span><span class="p">]:</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64decode</span><span class="p">(</span><span class="s2">&quot;ZGFpeGlhbmc=&quot;</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">35</span><span class="p">]:</span> <span class="s1">&#39;daixiang&#39;</span>

<span class="c1"># ç”±äºæ ‡å‡†çš„Base64ç¼–ç åå¯èƒ½å‡ºç°å­—ç¬¦+å’Œ/ï¼Œåœ¨URLä¸­å°±ä¸èƒ½ç›´æ¥ä½œä¸ºå‚æ•°ï¼Œæ‰€ä»¥åˆæœ‰ä¸€ç§&quot;url safe&quot;çš„base64ç¼–ç ï¼Œå…¶å®å°±æ˜¯æŠŠå­—ç¬¦+å’Œ/åˆ†åˆ«å˜æˆ-å’Œ_</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">36</span><span class="p">]:</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64encode</span><span class="p">(</span><span class="s1">&#39;i</span><span class="se">\xb7\x1d\xfb\xef\xff</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">36</span><span class="p">]:</span> <span class="s1">&#39;abcd++//&#39;</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">37</span><span class="p">]:</span> <span class="n">base64</span><span class="o">.</span><span class="n">urlsafe_b64encode</span><span class="p">(</span><span class="s1">&#39;i</span><span class="se">\xb7\x1d\xfb\xef\xff</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">37</span><span class="p">]:</span> <span class="s1">&#39;abcd--__&#39;</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">38</span><span class="p">]:</span> <span class="n">base64</span><span class="o">.</span><span class="n">urlsafe_b64decode</span><span class="p">(</span><span class="s1">&#39;abcd--__&#39;</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">38</span><span class="p">]:</span> <span class="s1">&#39;i</span><span class="se">\xb7\x1d\xfb\xef\xff</span><span class="s1">&#39;</span>

<span class="c1"># å®ç°ä¸€ä¸ªå»æ‰ï¼è§£ç è§£ç çš„æ–¹æ³•</span>
<span class="kn">import</span> <span class="nn">base64</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">45</span><span class="p">]:</span> <span class="k">def</span> <span class="nf">safe_b64decode</span><span class="p">(</span><span class="nb">str</span><span class="p">):</span>
   <span class="o">....</span><span class="p">:</span>     <span class="k">return</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64decode</span><span class="p">(</span><span class="nb">str</span><span class="o">+</span><span class="s1">&#39;=&#39;</span><span class="o">*</span><span class="p">(</span><span class="mi">4</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span><span class="o">%</span><span class="mi">4</span><span class="p">))</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">46</span><span class="p">]:</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64decode</span><span class="p">(</span><span class="s1">&#39;YWJjZA==&#39;</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">46</span><span class="p">]:</span> <span class="s1">&#39;abcd&#39;</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">48</span><span class="p">]:</span> <span class="n">safe_b64decode</span><span class="p">(</span><span class="s2">&quot;YWJjZA&quot;</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">48</span><span class="p">]:</span> <span class="s1">&#39;abcd&#39;</span>
</pre></div>
</div>
<h2>3.struct</h2>
<blockquote class="blockquote-normal">
                <p>è§£å†³strå’Œå…¶ä»–äºŒè¿›åˆ¶æ•°æ®ç±»å‹çš„è½¬æ¢</p></blockquote><div class="code-wrapper"><div class="lang-label">Python</div><div class="highlight"><pre><span></span><span class="c1"># structçš„packå‡½æ•°æŠŠä»»æ„æ•°æ®ç±»å‹å˜æˆå­—ç¬¦ä¸²</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">49</span><span class="p">]:</span>  <span class="kn">import</span> <span class="nn">struct</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">50</span><span class="p">]:</span> <span class="n">struct</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="s1">&#39;&gt;I&#39;</span><span class="p">,</span> <span class="mi">10240099</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">50</span><span class="p">]:</span> <span class="s1">&#39;</span><span class="se">\x00\x9c</span><span class="s1">@c&#39;</span>
<span class="c1"># unpackæŠŠstrå˜æˆç›¸åº”çš„æ•°æ®ç±»å‹</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">58</span><span class="p">]:</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;&gt;IH&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xf0\xf0\xf0\xf0\x80\x80</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">58</span><span class="p">]:</span> <span class="p">(</span><span class="mi">4042322160</span><span class="p">,</span> <span class="mi">32896</span><span class="p">)</span>
</pre></div>
</div>
<p><a href="https://docs.python.org/2/library/struct.html#format-characters">Structæ¨¡å—å®šä¹‰çš„æ•°æ®ç±»å‹</a></p>

<h2>4.hashlib</h2>
<blockquote class="blockquote-normal">
                <p>Pythonçš„hashlibæä¾›äº†å¸¸è§çš„æ‘˜è¦ç®—æ³•;å¦‚MD5,SHA1ç­‰ç­‰;<br/>ä»€ä¹ˆæ˜¯æ‘˜è¦ç®—æ³•å‘¢?æ‘˜è¦ç®—æ³•åˆç§°<strong>å“ˆå¸Œç®—æ³•/æ•£åˆ—ç®—æ³•</strong>;å®ƒé€šè¿‡ä¸€ä¸ªå‡½æ•°,æŠŠä»»æ„é•¿åº¦çš„æ•°æ®è½¬æ¢ä¸ºä¸€ä¸ªé•¿åº¦å›ºå®šçš„æ•°æ®ä¸²(é€šå¸¸ç”¨16è¿›åˆ¶çš„å­—ç¬¦ä¸²è¡¨ç¤º);<br/>æ‘˜è¦ç®—æ³•å°±æ˜¯é€šè¿‡æ‘˜è¦å‡½æ•°f()å¯¹ä»»æ„é•¿åº¦çš„æ•°æ®dataè®¡ç®—å‡ºå›ºå®šé•¿åº¦çš„æ‘˜è¦digest,ç›®çš„æ˜¯ä¸ºäº†å‘ç°åŸå§‹æ•°æ®æ˜¯å¦è¢«äººç¯¡æ”¹è¿‡;<br/>æ‘˜è¦ç®—æ³•ä¹‹æ‰€ä»¥èƒ½æŒ‡å‡ºæ•°æ®æ˜¯å¦è¢«ç¯¡æ”¹è¿‡,å°±æ˜¯å› ä¸º<strong>æ‘˜è¦å‡½æ•°æ˜¯ä¸€ä¸ªå•å‘å‡½æ•°</strong>,è®¡ç®—f(data)å¾ˆå®¹æ˜“,ä½†é€šè¿‡digeståæ¨dataå´éå¸¸å›°éš¾;è€Œä¸”,å¯¹åŸå§‹æ•°æ®åšä¸€ä¸ªbitçš„ä¿®æ”¹,éƒ½ä¼šå¯¼è‡´è®¡ç®—å‡ºçš„æ‘˜è¦å®Œå…¨ä¸åŒ;</p></blockquote>
<h3>md5</h3>
<div class="code-wrapper"><div class="lang-label">Python</div><div class="highlight"><pre><span></span><span class="c1"># æ‘˜è¦ç®—æ³•MD5ä¸ºä¾‹,è®¡ç®—å‡ºä¸€ä¸ªå­—ç¬¦ä¸²çš„MD5å€¼</span>
<span class="c1"># MD5æ˜¯æœ€å¸¸è§çš„æ‘˜è¦ç®—æ³•,é€Ÿåº¦å¾ˆå¿«,ç”Ÿæˆç»“æœæ˜¯å›ºå®šçš„128bitå­—èŠ‚,é€šå¸¸ç”¨ä¸€ä¸ª32ä½çš„16è¿›åˆ¶å­—ç¬¦ä¸²è¡¨ç¤º</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="n">md5</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">md5</span><span class="p">()</span>
<span class="n">md5</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="s1">&#39;how to use md5 in python hashlib?&#39;</span><span class="p">)</span>
<span class="k">print</span> <span class="n">md5</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
<span class="c1"># è®¡ç®—ç»“æœå¦‚ä¸‹ï¼š</span>
<span class="n">d26a53750bc40b38b65a520292f69306</span>

<span class="c1"># å¦‚æœæ•°æ®é‡å¤§çš„è¯,åˆ†å—å¤šæ¬¡è°ƒç”¨update()ï¼Œæœ€åè®¡ç®—çš„ç»“æœæ˜¯ä¸€æ ·çš„</span>
<span class="n">md5</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">md5</span><span class="p">()</span>
<span class="n">md5</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="s1">&#39;how to use md5 in &#39;</span><span class="p">)</span>
<span class="n">md5</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="s1">&#39;python hashlib?&#39;</span><span class="p">)</span>
<span class="k">print</span> <span class="n">md5</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
</pre></div>
</div>
<h3>SHA1</h3>
<blockquote class="blockquote-normal">
                <p>æ‘˜è¦ç®—æ³•SHA1ï¼Œè°ƒç”¨SHA1å’Œè°ƒç”¨MD5å®Œå…¨ç±»ä¼¼<br/>æ¯”SHA1æ›´å®‰å…¨çš„ç®—æ³•æ˜¯SHA256å’ŒSHA512ï¼Œä¸è¿‡è¶Šå®‰å…¨çš„ç®—æ³•è¶Šæ…¢ï¼Œè€Œä¸”æ‘˜è¦é•¿åº¦æ›´é•¿</p></blockquote><div class="code-wrapper"><div class="lang-label">Python</div><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">hashlib</span>
<span class="n">sha1</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha1</span><span class="p">()</span>
<span class="n">sha1</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="s1">&#39;how to use sha1 in &#39;</span><span class="p">)</span>
<span class="n">sha1</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="s1">&#39;python hashlib?&#39;</span><span class="p">)</span>
<span class="k">print</span> <span class="n">sha1</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
</pre></div>
</div>
<h2>5.itertools</h2>
<blockquote class="blockquote-normal">
                <p>itertoolsæä¾›äº†éå¸¸æœ‰ç”¨çš„ç”¨äºæ“ä½œè¿­ä»£å¯¹è±¡çš„å‡½æ•°;<br/>itertoolsæ¨¡å—æä¾›çš„å…¨éƒ¨æ˜¯å¤„ç†è¿­ä»£åŠŸèƒ½çš„å‡½æ•°,å®ƒä»¬çš„è¿”å›å€¼ä¸æ˜¯list,è€Œæ˜¯è¿­ä»£å¯¹è±¡,åªæœ‰ç”¨forå¾ªç¯è¿­ä»£çš„æ—¶å€™æ‰çœŸæ­£è®¡ç®—;</p></blockquote>
<h3>æ— é™è¿­ä»£</h3>
<blockquote class="blockquote-normal">
                <p>itertools.count(1) ä¼šåˆ›å»ºæ— é™è¿­ä»£çš„è‡ªç„¶æ•°åºåˆ—</p></blockquote><div class="code-wrapper"><div class="lang-label">Python</div><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">itertools</span>
<span class="n">natuals</span> <span class="o">=</span> <span class="n">itertools</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">natuals</span><span class="p">:</span>
    <span class="k">print</span> <span class="n">n</span>
</pre></div>
</div><blockquote class="blockquote-normal">
                <p>itertools.cycle()ä¼šæŠŠä¼ å…¥çš„ä¸€ä¸ªåºåˆ—æ— é™é‡å¤ä¸‹å»</p></blockquote><div class="code-wrapper"><div class="lang-label">Python</div><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">itertools</span>
<span class="n">cs</span> <span class="o">=</span> <span class="n">itertools</span><span class="o">.</span><span class="n">cycle</span><span class="p">(</span><span class="s1">&#39;ABC&#39;</span><span class="p">)</span> <span class="c1"># æ³¨æ„å­—ç¬¦ä¸²ä¹Ÿæ˜¯åºåˆ—çš„ä¸€ç§</span>
<span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">cs</span><span class="p">:</span>
    <span class="k">print</span> <span class="n">c</span>
</pre></div>
</div><blockquote class="blockquote-normal">
                <p>itertools.repeat()è´Ÿè´£æŠŠä¸€ä¸ªå…ƒç´ æ— é™é‡å¤ä¸‹å»ï¼Œä¸è¿‡å¦‚æœæä¾›ç¬¬äºŒä¸ªå‚æ•°å°±å¯ä»¥é™å®šé‡å¤æ¬¡æ•°</p></blockquote><div class="code-wrapper"><div class="lang-label">Python</div><div class="highlight"><pre><span></span><span class="n">ns</span> <span class="o">=</span> <span class="n">itertools</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span> <span class="c1">#æ‰“å°10æ¬¡&#39;A&#39;</span>
<span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">ns</span><span class="p">:</span>
    <span class="k">print</span> <span class="n">n</span>
</pre></div>
</div><blockquote class="blockquote-normal">
                <p>itertools.takewhile()ç­‰å‡½æ•°æ ¹æ®æ¡ä»¶åˆ¤æ–­æ¥ä»åºåˆ—ä¸­æˆªå–å‡ºä¸€ä¸ªæœ‰é™çš„åºåˆ—</p></blockquote><div class="code-wrapper"><div class="lang-label">Python</div><div class="highlight"><pre><span></span><span class="n">natuals</span> <span class="o">=</span> <span class="n">itertools</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ns</span> <span class="o">=</span> <span class="n">itertools</span><span class="o">.</span><span class="n">takewhile</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">natuals</span><span class="p">)</span>
<span class="n">res</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">ns</span> <span class="k">if</span> <span class="n">i</span><span class="p">]</span>
<span class="k">print</span> <span class="n">res</span>
</pre></div>
</div>
<h3>æ“ä½œè¿­ä»£å™¨å‡½æ•°</h3>

<h4>itertools.chain()</h4>
<blockquote class="blockquote-normal">
                <p>itertools.chain()å¯ä»¥æŠŠä¸€ç»„è¿­ä»£å¯¹è±¡ä¸²è”èµ·æ¥,å½¢æˆä¸€ä¸ªæ›´å¤§çš„è¿­ä»£å™¨ </p></blockquote><div class="code-wrapper"><div class="lang-label">Python</div><div class="highlight"><pre><span></span><span class="c1"># F1:</span>
<span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">chain</span><span class="p">(</span><span class="s1">&#39;ABC&#39;</span><span class="p">,</span> <span class="s1">&#39;XYZ&#39;</span><span class="p">):</span>
    <span class="k">print</span> <span class="n">c</span>
<span class="c1"># è¿­ä»£æ•ˆæœï¼š&#39;A&#39; &#39;B&#39; &#39;C&#39; &#39;X&#39; &#39;Y&#39; &#39;Z&#39;</span>

<span class="c1"># F2:</span>
<span class="n">a_list</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]]</span>
<span class="k">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">itertools</span><span class="o">.</span><span class="n">chain</span><span class="o">.</span><span class="n">from_iterable</span><span class="p">(</span><span class="n">a_list</span><span class="p">)))</span>
<span class="c1"># Output: [1, 2, 3, 4, 5, 6]</span>
</pre></div>
</div>
<h4>itertools.groupby()</h4>
<blockquote class="blockquote-normal">
                <p>itertools.groupby()æŠŠè¿­ä»£å™¨ä¸­ç›¸é‚»çš„é‡å¤å…ƒç´ æŒ‘å‡ºæ¥æ”¾åœ¨ä¸€èµ·</p></blockquote><div class="code-wrapper"><div class="lang-label">Python</div><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;AAABBB&#39;</span><span class="p">):</span>
    <span class="k">print</span> <span class="n">key</span><span class="p">,</span><span class="nb">list</span><span class="p">(</span><span class="n">group</span><span class="p">)</span>
<span class="c1"># ç»“æœ</span>
<span class="n">A</span> <span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">]</span>
<span class="n">B</span> <span class="p">[</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">]</span>
</pre></div>
</div>
<h4>itertools.imap()</h4>
<blockquote class="blockquote-normal">
                <p>itertools.imap()å’Œitertools.map()çš„åŒºåˆ«åœ¨äº,imap()å¯ä»¥ä½œç”¨äºæ— ç©·åºåˆ—,å¹¶ä¸”,å¦‚æœä¸¤ä¸ªåºåˆ—çš„é•¿åº¦ä¸ä¸€è‡´,ä»¥çŸ­çš„é‚£ä¸ªä¸ºå‡†</p></blockquote><div class="code-wrapper"><div class="lang-label">Python</div><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">imap</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span><span class="p">,</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">],</span> <span class="n">itertools</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="mi">1</span><span class="p">)):</span>
    <span class="k">print</span> <span class="n">x</span>
<span class="c1"># ç»“æœ</span>
<span class="mi">10</span>
<span class="mi">40</span>
<span class="mi">90</span>
</pre></div>
</div><blockquote class="blockquote-normal">
                <p>itertools.ifilter()å°±æ˜¯itertools.filter()çš„æƒ°æ€§å®ç°</p></blockquote><div class="code-wrapper"><div class="lang-label">Python</div><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">is_odd</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">n</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">itertools</span><span class="o">.</span><span class="n">ifilter</span><span class="p">(</span><span class="n">is_odd</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">])</span>
<span class="k">print</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">r</span> <span class="p">]</span>
<span class="c1"># ç»“æœ</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
</pre></div>
</div>
<h2>6.åˆå§‹åŒ–ç±»æ—¶å°†ä¼ é€’å‚æ•°æ·»åŠ åˆ°self.<strong>dict</strong>ä¸­</h2>
<blockquote class="blockquote-normal">
                <p>locals().items()è·å–å±€éƒ¨å‘½åç©ºé—´</p></blockquote><div class="code-wrapper"><div class="lang-label">Python</div><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">A</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">f</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">locals</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">k</span> <span class="o">!=</span> <span class="s1">&#39;self&#39;</span><span class="p">})</span>
</pre></div>
</div>
<h2>7.sort or sorted æ’åº</h2>
<blockquote class="blockquote-normal">
                <p>sorted:ä¸å½±å“åŸå§‹æ•°æ®<br/>sort:ç›´æ¥åœ¨åŸå§‹æ•°æ®ä¸­æ›´æ”¹</p></blockquote><div class="code-wrapper"><div class="lang-label">Python</div><div class="highlight"><pre><span></span><span class="c1"># è¯­æ³•</span>
<span class="c1">## æ³¨æ„: python3.x åcmpå·²ç»è¢«å»é™¤,keyå€¼ä¸ºæ’åºå‡½æ•°,reverseä¸ºæ˜¯å¦å€’å™</span>
<span class="n">sort</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
    <span class="n">L</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="nb">cmp</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span> <span class="o">--</span> <span class="n">stable</span> <span class="n">sort</span> <span class="o">*</span><span class="n">IN</span> <span class="n">PLACE</span><span class="o">*</span><span class="p">;</span>
    <span class="nb">cmp</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span>

<span class="nb">sorted</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
    <span class="nb">sorted</span><span class="p">(</span><span class="n">iterable</span><span class="p">,</span> <span class="nb">cmp</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span> <span class="o">--&gt;</span> <span class="n">new</span> <span class="nb">sorted</span> <span class="nb">list</span>
</pre></div>
</div><div class="code-wrapper"><div class="lang-label">Python</div><div class="highlight"><pre><span></span><span class="c1"># ä»»æ„åˆ—è¡¨æ±‚å…ƒç´ å‡ºç°æ¬¡æ•°æœ€å¤šçš„å‰10ä¸ª</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">Counter</span>
<span class="kn">from</span> <span class="nn">operator</span> <span class="kn">import</span> <span class="n">itemgetter</span>
<span class="n">lis</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">55</span><span class="p">,</span><span class="mi">55</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">123</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">123</span><span class="p">,</span><span class="mi">123</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">534</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">44</span><span class="p">,</span><span class="mi">44</span><span class="p">]</span>
<span class="nb">sorted</span><span class="p">(</span><span class="n">Counter</span><span class="p">(</span><span class="n">lis</span><span class="p">)</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span><span class="n">key</span> <span class="o">=</span> <span class="n">itemgetter</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">reverse</span><span class="o">=</span><span class="bp">True</span><span class="p">)[:</span><span class="mi">10</span><span class="p">]</span>
</pre></div>
</div>
<h2>8.Context managersä¸Šä¸‹æ–‡ç®¡ç†</h2>

<h3>æœ€å¹¿æ³›ä½¿ç”¨çš„ä¸Šä¸‹æ–‡ç®¡ç†å™¨çš„ä¾‹å­æ˜¯withè¯­å¥</h3>

<h4>python fileå’Œopenæœ‰ä»€ä¹ˆåŒºåˆ«</h4>
<blockquote class="blockquote-normal">
                <p>Python2.xé‡Œ,fileè¿”å›æ–‡ä»¶å¯¹è±¡,openæ˜¯è¿”å›æ–°åˆ›å»ºçš„æ–‡ä»¶å¯¹è±¡çš„å†…å»ºå‡½æ•°<br/>Python3.xé‡Œå–æ¶ˆäº†file</p></blockquote><div class="code-wrapper"><div class="lang-label">Python</div><div class="highlight"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;some_file&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">opened_file</span><span class="p">:</span>
    <span class="n">opened_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;Hola!&#39;</span><span class="p">)</span>

<span class="c1"># ç±»ä¼¼äº</span>
<span class="c1">## å°è¯•æ“ä½œæ–‡ä»¶,æ‰§è¡Œå®Œæˆåå…³é—­æ–‡ä»¶</span>
<span class="nb">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;some_file&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
<span class="k">try</span><span class="p">:</span>
    <span class="nb">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;Hola!&#39;</span><span class="p">)</span>
<span class="k">finally</span><span class="p">:</span>
    <span class="nb">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<h3>è‡ªå®šä¹‰å¯ç”¨äºä¸Šä¸‹æ–‡ç®¡ç†çš„ç±»</h3>
<blockquote class="blockquote-normal">
                <p>ä¸Šä¸‹æ–‡ç®¡ç†å™¨(context manager)æ˜¯Python2.5å¼€å§‹æ”¯æŒçš„ä¸€ç§è¯­æ³•,ç”¨äºè§„å®šæŸä¸ªå¯¹è±¡çš„ä½¿ç”¨èŒƒå›´,ä¸€æ—¦è¿›å…¥æˆ–è€…ç¦»å¼€è¯¥ä½¿ç”¨èŒƒå›´,ä¼šæœ‰ç‰¹æ®Šæ“ä½œè¢«è°ƒç”¨[æ¯”å¦‚ä¸ºå¯¹è±¡åˆ†é…æˆ–è€…é‡Šæ”¾å†…å­˜]å®ƒçš„è¯­æ³•å½¢å¼æ˜¯with func() as f:</p></blockquote><div class="code-wrapper"><div class="lang-label">Python</div><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">File</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
   <span class="sd">&quot;&quot;&quot;ä»»ä½•å®šä¹‰äº†__enter__()å’Œ__exit__()æ–¹æ³•çš„å¯¹è±¡éƒ½å¯ä»¥ç”¨äºä¸Šä¸‹æ–‡ç®¡ç†å™¨&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span> <span class="n">method</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">file_obj</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="n">method</span><span class="p">)</span>
    <span class="k">def</span> <span class="fm">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">file_obj</span>
    <span class="k">def</span> <span class="fm">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">type</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">traceback</span><span class="p">):</span>
        <span class="c1">#print(&quot;Exception has been handled&quot;)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">file_obj</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">True</span>

<span class="c1"># æ–¹æ³•ä¸€:æ™®é€šæ–¹å¼</span>
<span class="n">f</span> <span class="o">=</span> <span class="n">File</span><span class="p">(</span><span class="s2">&quot;demo.txt&quot;</span><span class="p">,</span><span class="s2">&quot;w&quot;</span><span class="p">)</span>
<span class="n">fi</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="fm">__enter__</span><span class="p">()</span>
<span class="n">fi</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;test&quot;</span><span class="p">)</span>
<span class="n">f</span><span class="o">.</span><span class="fm">__exit__</span><span class="p">(</span><span class="nb">type</span><span class="p">,</span><span class="bp">None</span><span class="p">,</span><span class="bp">None</span><span class="p">)</span>

<span class="c1"># æ–¹æ³•äºŒ:ä¸Šä¸‹æ–‡ç®¡ç†æ–¹å¼</span>
<span class="k">with</span> <span class="n">File</span><span class="p">(</span><span class="s2">&quot;demo.txt&quot;</span><span class="p">,</span><span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span> <span class="c1"># å½“æ‰§è¡Œwith asæ—¶è‡ªåŠ¨æ‰§è¡Œ__enter__</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;test with&quot;</span><span class="p">)</span> <span class="c1"># å†™å…¥å®Œæˆåè‡ªåŠ¨æ‰§è¡Œ__exit__</span>
</pre></div>
</div>
<h3>æ ‡å‡†åº“è£…é¥°å™¨åŸºäºå‡½æ•°çº§åˆ«çš„ä¸Šä¸‹æ–‡æ“ä½œ</h3>
<div class="code-wrapper"><div class="lang-label">Python</div><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">contextlib</span> <span class="kn">import</span> <span class="n">contextmanager</span>

<span class="nd">@contextmanager</span>
<span class="c1"># open_fileä½¿ç”¨contextmanagerè£…é¥°</span>
<span class="c1"># è¿”å›GeneratorContextManager(func(*args, **kwds))çš„å®ä¾‹åŒ–å¯¹è±¡</span>
<span class="c1"># GeneratorContextManagerç±»ä¸­å®šä¹‰å¥½äº†__enter__å’Œ__exit__è¯­æ³•</span>
<span class="k">def</span> <span class="nf">open_file</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
    <span class="k">yield</span> <span class="n">f</span>
    <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="k">with</span> <span class="n">open_file</span><span class="p">(</span><span class="s1">&#39;some_file&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="c1"># æ‰€ä»¥å½“ä½¿ç”¨with asè¯­æ³•çš„æ—¶å€™ä¼šè‡ªåŠ¨è¿›è¡Œ__enter__å’Œ__exit__å‡½æ•°çš„æ‰§è¡Œ</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;contextmanager test!&#39;</span><span class="p">)</span>
</pre></div>
</div>
    </div>
    <div id="donate" style="text-align: center;">
        <a href="#donation-wrapper"><div onclick="displayDonation()" class="ui basic green button">æ‰“èµ <i class="red heart icon"></i></div></a>
    </div>
    <div id="comments">
    </div>
    <div id="more-words">
        <a href="/#entrys"><div id="more-words">MORE WORDS</div></a>
    </div>
</div>

        </div>

        <div id="footer" class="footer code">
            <span>Â© 1994 - 2018 willdx</span><b>@</b><a class="code" href="https://github.com/willdx/willdx.github.io">blog.willdx.me</a>
            <br/>
            <span class="notprint">
                <span id="busuanzi_container_site_pv">
                    <i class="eye icon"></i><span id="busuanzi_value_site_pv" class="orange text"></span> pv
                </span>
                <b> | </b>
                <span id="busuanzi_container_site_uv">
                    <i class="user icon"></i><span id="busuanzi_value_site_uv" class="orange text"></span> uv
                </span>
                <br/>
            </span>
            <span>Power by <i class="github alternate icon"></i><a href="https://github.com/willdx/willdx.github.io">Github Page</a></span>
            <br/>
            <i class="green superpowers icon"></i>
        </div>
    </body>
    
    
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <script src="/assets/js/web.js"></script>
    <script>
        // ç»Ÿè®¡ä»£ç 
        var skin = localStorage.getItem('skin');

        if (skin) {
            document.body.className = skin;
        } else {
            localStorage.setItem('skin', 'sk-default');
        }

        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-68394485-1', 'auto');
        ga('send', 'pageview');

        var wrappers = ["cats-wrapper", "donation-wrapper", "social-links-wrapper", "search-wrapper", "site-wrapper"]

        window.onload = function () {
            useWechat();
        }
    </script>
    
    <script src="/assets/3rd/gitalk.min.js"></script>
    <script>
    const gitalk = new Gitalk({
        clientID: 'de35601f0076c240632f',
        clientSecret: 'b44ba043a5af4818f53dc13d3b4e49b5a28a2a0c',
        repo: 'willdx.github.io',
        owner: 'willdx',
        admin: ['willdx'],
        id: 'pythonæ ‡å‡†åº“-part01', // Ensure uniqueness and length less than 50
        distractionFreeMode: false,  // Facebook-like distraction free mode
        labels: ['gitment'],
        pagerDirection: "last",
	      proxy: 'https://gh-oauth.imsun.net'
    })
      
    gitalk.render('comments')
    </script>


</html>