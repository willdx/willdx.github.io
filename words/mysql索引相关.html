<html>
    <head>
        <meta charset="utf-8">
        
    
        <title> mysql索引相关 </title>
        <meta name="google-site-verification" content="xTBu05X0P9OJkoWvQWGdZimRp6nD6uqesWwTJ6v-BoA" />
        <meta name="google-site-verification" content="7Obwo8u7tT_NKgyJiirEB1qRpINEnh9BtyBa1WtiVjU" />
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="/assets/global.css">
        <link rel="stylesheet" href="/assets/theme.css">
        <link rel="stylesheet" href="/assets/semantic/components/button.min.css">
        <link rel="stylesheet" href="/assets/semantic/components/icon.min.css">
        <link rel="stylesheet" href="/assets/semantic/components/card.min.css">
        <link rel="stylesheet" href="/assets/semantic/components/list.min.css">
        <link rel="stylesheet" href="/assets/semantic/components/container.min.css">
        <link rel="stylesheet" href="/assets/semantic/components/input.min.css">
        <link rel="shortcut icon" href="/assets/images/favicon.ico" type="image/x-icon">
        <link rel="apple-touch-icon" sizes="128x128" href="/assets/images/favicon.ico">
        <link rel="icon" href="/assets/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="/assets/words.css">
    <link rel="stylesheet" href="/assets/monokai.css">
    <link rel="stylesheet" href="/assets/3rd/gitalk.css">
    <link rel="stylesheet" href="/assets/semantic/components/table.min.css">


        <style type="text/css"> 
        </style>
    </head>
    
    <body class="sk-default">
        <div id="site-wrapper" style="display: none;" class="topwrapper">
            <div class="ui container">
                <h3><span style="color: #fff;">主题选择</span></h3>
                <table id="theme" style="width: 100%; color: #fff; margin-left: auto; margin-right: auto;">
                        <tbody>
                            <tr class="sk-mo" onclick="document.body.className = 'sk-mo'; localStorage.setItem('skin', 'sk-mo');">
                                <td class="title">墨</td>
                                <td width="50%;"><div style="width: 100%;height: 25px; background: var(--main-bg);" class="bg"></div></td>
                            </tr>
                            <tr class="sk-green" onclick="document.body.className = 'sk-green'; localStorage.setItem('skin', 'sk-green');">
                                <td class="title">绿</td>
                                <td width="50%;"><div style="width: 100%;height: 25px; background: var(--main-bg);" class="bg"></div></td>
                            </tr>
                            <tr class="sk-default" onclick="document.body.className = 'sk-default'; localStorage.setItem('skin', 'sk-default');">
                                <td class="title">青</td>
                                <td width="50%;"><div style="width: 100%;height: 25px; background: var(--main-bg);" class="bg"></div></td>
                            </tr>
                            <tr class="sk-orange" onclick="document.body.className = 'sk-orange'; localStorage.setItem('skin', 'sk-orange');">
                                <td class="title">橘</td>
                                <td width="50%;"><div style="width: 100%;height: 25px; background: var(--main-bg);" class="bg ">
                                </div></td>
                            </tr>
                        </tbody>
                    </table>
            </div>
        </div>
        <div id="cats-wrapper" style="display: none;" class="topwrapper">
            <div class="ui container">
                <table style="color: #fff;">
                    <tbody>
                        <tr>
                            <td valign="middle" align="center" width="50%">
                                <img src="/assets/cat-bn-avatar.jpeg" />
                                <div class="name">波妞</div>
                                <div class="time">2017年2月21号</div>
                            </td>
                            <td valign="middle" align="center" width="50%">
                                <img src="/assets/cat-ss-avatar.png" />
                                <div class="name">三三</div>
                                <div class="time">2017年4月10号</div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
        </div>
        <div id="donation-wrapper" style="display: none;" class="topwrapper">
            <div class="ui container" style="text-align: center;">
                <div class="description">
                    <i class="teal quote left icon"></i>
                    如果觉得我的文章对您有用，请随意打赏。您的支持将鼓励我继续创作!
                    <i class="teal quote right icon"></i>
                </div>

                <div class="ui buttons">
                    <button onclick="useWechat()" id="wechat" class="ui active secondary icon button">
                        微信
                    </button>
                    <button onclick="useAlipay()" id="alipay" class="ui secondary icon button">
                        支付宝
                    </button>
                </div>

                <div id="donation-qrcode">
                    <img id="wechat-qrcode-image" src="/assets/images/wechat.png">
                    <img id="alipay-qrcode-image" src="/assets/images/alipay.jpg">
                    <!-- <img id="donation-qrcode-image" src="/assets/images/wechat.png"> -->
                </div>
            </div>
        </div>

        <div id="social-links-wrapper" style="display: none;" class="topwrapper">
            <a href="mailto:1426409836@qq.com">
                <button class="ui mini red circular icon button">
                    <i class="mail icon"></i>
                </button>
            </a>
            <a href="https://github.com/willdx">
                <button class="ui mini grey circular github icon button">
                  <i class="github icon"></i>
                </button>
            </a>
            <a href="https://twitter.com/willdx">
                <button class="ui mini circular twitter icon button">
                  <i class="twitter icon"></i>
                </button>
            </a>
            <button onclick="toggleWechat()" class="ui mini green circular icon button">
                <i class="wechat icon"></i>
            </button>
            
            <div id="wx" style="display: none;">
                <img src="/assets/images/wx.jpeg" />
            </div>
        </div>

        <div id="search-wrapper" style="display: none;" class="topwrapper">
            <div id="search" class="ui container">
              <input id="searchInput" onkeypress="return search(event)" type="search" placeholder="Search with google...">
            </div>
        </div>

        <div id="topbar"></div>

        <div id="triggers-wrapper">
            <div class="ui black mini buttons">
                <button onclick="toggleById(wrappers, 'site-wrapper')" class="ui secondary site-wrapper icon button">
                    <i class="snowflake icon"></i>
                </button>
    
                <button onclick="toggleById(wrappers, 'social-links-wrapper')" class="ui secondary social-links-wrapper icon button">
                    <i class="linkify icon"></i>
                </button>
                <button onclick="toggleById(wrappers, 'search-wrapper')" class="ui secondary search-wrapper icon button">
                    <i class="search icon"></i>
                </button>
                <!--
                <button onclick="toggleById(wrappers, 'cats-wrapper')" class="ui secondary cats-wrapper icon button">
                    🐱
                </button>
                -->
                <button onclick="toggleById(wrappers, 'donation-wrapper')" class="ui secondary donation-wrapper icon button">
                    <i class="heart icon"></i>
                </button>
            </div>
        </div> 
    
        <div id="main">
            <div class="me">
                <div class="avatar">
                    <img src="/assets/images/avatar.png">
                </div>
    
                <h2 class="name">Will Dx</h2>

                <span class="sign">人世一身霜雪, 归来仍是少年.</span>
            </div>
            
            <div class="top menu">
                <div class="ui horizontal bulleted link list">
                    <a href="/" class="item">
                        主页
                    </a>
                    <a href="/tweet.html" class="item">
                        推特
                    </a>
                    <a href="/about.html" class="item">
                        关于我
                    </a>
                    <a href="#social-links-wrapper" style="cursor: pointer;" class="item" onclick="toggleById(wrappers, 'social-links-wrapper')">
                        联系
                    </a>
                    <a href="/rss.xml" class="item">
                        RSS 
                    </a>
                </div>
            </div>

            
<div id="content" class="typo ui container">
    <div id="article">
        <h1>mysql索引相关</h1>
        <h4>Posted April 07, 2017</h4>
        <p><a href="https://segmentfault.com/a/1190000003072424">文章作者:人云思云</a></p>

<h1>mysql索引</h1>

<h2>概述</h2>

<p>索引是用来提高查询速度的一种数据结构;默认查询算法当然是顺序查找(linear search);</p>
<blockquote class="blockquote-normal">
                <p>数据库查询是数据库的最主要功能之一;我们都希望查询数据的速度能尽可能的快,因此数据库系统的设计者会从查询算法的角度进行优化;最基本的查询算法当然是顺序查找(linear search),这种复杂度为O(n)的算法在数据量很大时显然是糟糕的,好在计算机科学的发展提供了很多更优秀的查找算法,例如二分查找(binary search)、二叉树查找(binary tree search)等;如果稍微分析一下会发现,每种查找算法都只能应用于特定的数据结构之上,例如二分查找要求被检索数据有序,而二叉树查找只能应用于二叉查找树上,但是数据本身的组织结构不可能完全满足各种数据结构(例如,理论上不可能同时将两列都按顺序进行组织),所以,在数据之外,数据库系统还维护着满足特定查找算法的数据结构,这些数据结构以某种方式引用(指向)数据,这样就可以在这些数据结构上实现高级查找算法;这种数据结构,就是索引;</p></blockquote>
<h2>索引的存储分类</h2>
<blockquote class="blockquote-normal">
                <p>索引是在MYSQL的存储引擎层中实现的,而不是在服务层实现的;所以每种存储引擎的索引都不一定完全相同,也不是所有的存储引擎都支持所有的索引类型;MYSQL目前提供了一下4种索引</p></blockquote><div class="code-wrapper"><div class="lang-label">Python</div><div class="highlight"><pre><span></span><span class="n">B</span><span class="o">-</span><span class="n">Tree</span> <span class="err">索引：最常见的索引类型</span><span class="p">,</span><span class="err">大部分引擎都支持</span><span class="n">B</span><span class="err">树索引</span>
<span class="n">HASH</span> <span class="err">索引：只有</span><span class="n">Memory</span><span class="err">引擎支持</span><span class="p">,</span><span class="err">使用场景简单</span>
<span class="n">R</span><span class="o">-</span><span class="n">Tree</span> <span class="err">索引</span><span class="p">(</span><span class="err">空间索引</span><span class="p">)</span><span class="err">：空间索引是</span><span class="n">MyISAM</span><span class="err">的一种特殊索引类型</span><span class="p">,</span><span class="err">主要用于地理空间数据类型</span>
<span class="n">Full</span><span class="o">-</span><span class="n">text</span> <span class="p">(</span><span class="err">全文索引</span><span class="p">)</span><span class="err">：全文索引也是</span><span class="n">MyISAM</span><span class="err">的一种特殊索引类型</span><span class="p">,</span><span class="err">主要用于全文索引</span>
<span class="n">InnoDB</span><span class="err">从</span><span class="n">MYSQL5</span><span class="o">.</span><span class="mi">6</span><span class="err">版本提供对全文索引的支持</span>
</pre></div>
</div><blockquote class="blockquote-normal">
                <p>Mysql目前不支持函数索引,但是能对列的前面某一部分进行索引,例如标题title字段,可以只取title的前10个字符进行索引,这个特性可以大大缩小索引文件的大小,但前缀索引也有缺点,在排序Order By和分组Group By 操作的时候无法使用;用户在设计表结构的时候也可以对文本列根据此特性进行灵活设计;语法：create index idx_title on film (title(10))</p></blockquote>
<p><p class="hassubimage"><img src="http://7xj7fg.com1.z0.glb.clouddn.com/msyql_engine_index.png"></p>
                    <p class="img-title"><span class="symbol">#</span>MyISAM/InnoDB引擎/Memory三个常用引擎类型比较</p></p>

<h2>B-TREE索引类型</h2>
<div class="code-wrapper"><div class="lang-label">Python</div><div class="highlight"><pre><span></span><span class="err">普通索引</span>
<span class="err">这是最基本的索引类型</span><span class="p">,</span><span class="err">而且它没有唯一性之类的限制</span><span class="p">;</span><span class="err">普通索引可以通过以下几种方式创建：</span>
<span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="err">创建索引</span><span class="p">:</span> <span class="n">CREATE</span> <span class="n">INDEX</span> <span class="err">索引名</span> <span class="n">ON</span> <span class="err">表名</span><span class="p">(</span><span class="err">列名</span><span class="mi">1</span><span class="p">,</span><span class="err">列名</span><span class="mi">2</span><span class="p">,</span><span class="o">...</span><span class="p">);</span>
<span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="err">修改表</span><span class="p">:</span> <span class="n">ALTER</span> <span class="n">TABLE</span> <span class="err">表名</span><span class="n">ADD</span> <span class="n">INDEX</span> <span class="err">索引名</span> <span class="p">(</span><span class="err">列名</span><span class="mi">1</span><span class="p">,</span><span class="err">列名</span><span class="mi">2</span><span class="p">,</span><span class="o">...</span><span class="p">);</span>
<span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="err">创建表时指定索引：</span><span class="n">CREATE</span> <span class="n">TABLE</span> <span class="err">表名</span> <span class="p">(</span> <span class="p">[</span><span class="o">...</span><span class="p">],</span> <span class="n">INDEX</span> <span class="err">索引名</span> <span class="p">(</span><span class="err">列名</span><span class="mi">1</span><span class="p">,</span><span class="err">列名</span> <span class="mi">2</span><span class="p">,</span><span class="o">...</span><span class="p">)</span> <span class="p">);</span>
<span class="n">UNIQUE</span><span class="err">索引</span>
<span class="err">表示唯一的</span><span class="p">,</span><span class="err">不允许重复的索引</span><span class="p">,</span><span class="err">如果该字段信息保证不会重复例如身份证号用作索引时</span><span class="p">,</span><span class="err">可设置为</span><span class="n">unique</span><span class="err">：</span>
<span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="err">创建索引：</span><span class="n">CREATE</span> <span class="n">UNIQUE</span> <span class="n">INDEX</span> <span class="err">索引名</span> <span class="n">ON</span> <span class="err">表名</span><span class="p">(</span><span class="err">列的列表</span><span class="p">);</span>
<span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="err">修改表：</span><span class="n">ALTER</span> <span class="n">TABLE</span> <span class="err">表名</span><span class="n">ADD</span> <span class="n">UNIQUE</span> <span class="err">索引名</span> <span class="p">(</span><span class="err">列的列表</span><span class="p">);</span>
<span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="err">创建表时指定索引：</span><span class="n">CREATE</span> <span class="n">TABLE</span> <span class="err">表名</span><span class="p">(</span> <span class="p">[</span><span class="o">...</span><span class="p">],</span> <span class="n">UNIQUE</span> <span class="err">索引名</span> <span class="p">(</span><span class="err">列的列表</span><span class="p">)</span> <span class="p">);</span>
<span class="err">主键：</span><span class="n">PRIMARY</span> <span class="n">KEY</span><span class="err">索引</span>
<span class="err">主键是一种唯一性索引</span><span class="p">,</span><span class="err">但它必须指定为“</span><span class="n">PRIMARY</span> <span class="n">KEY</span><span class="err">”</span><span class="p">;</span>
<span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="err">主键一般在创建表的时候指定：“</span><span class="n">CREATE</span> <span class="n">TABLE</span> <span class="err">表名</span><span class="p">(</span> <span class="p">[</span><span class="o">...</span><span class="p">],</span> <span class="n">PRIMARY</span> <span class="n">KEY</span> <span class="p">(</span><span class="err">列的列表</span><span class="p">)</span> <span class="p">);</span> <span class="err">”</span><span class="p">;</span>
<span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="err">但是</span><span class="p">,</span><span class="err">我们也可以通过修改表的方式加入主键：“</span><span class="n">ALTER</span> <span class="n">TABLE</span> <span class="err">表名</span><span class="n">ADD</span> <span class="n">PRIMARY</span> <span class="n">KEY</span> <span class="p">(</span><span class="err">列的列表</span><span class="p">);</span> <span class="err">”</span><span class="p">;</span>
<span class="err">每个表只能有一个主键</span><span class="p">;</span> <span class="p">(</span><span class="err">主键相当于聚合索引</span><span class="p">,</span><span class="err">是查找最快的索引</span><span class="p">)</span>
<span class="err">注：不能用</span><span class="n">CREATE</span> <span class="n">INDEX</span><span class="err">语句创建</span><span class="n">PRIMARY</span> <span class="n">KEY</span><span class="err">索引</span>
</pre></div>
</div>
<h2>索引的设置语法</h2>

<h3>一 设置索引</h3>
<div class="code-wrapper"><div class="lang-label">Python</div><div class="highlight"><pre><span></span><span class="err">一</span> <span class="err">设置索引</span>
<span class="err">在执行</span><span class="n">CREATE</span> <span class="n">TABLE</span><span class="err">语句时可以创建索引</span><span class="p">,</span><span class="err">也可以单独用</span><span class="n">CREATE</span> <span class="n">INDEX</span><span class="err">或</span><span class="n">ALTER</span> <span class="n">TABLE</span><span class="err">来为表增加索引</span>

<span class="mi">1</span><span class="err">．</span><span class="n">ALTER</span> <span class="n">TABLE</span> <span class="o">-</span> <span class="n">ALTER</span> <span class="n">TABLE</span><span class="err">用来创建普通索引、</span><span class="n">UNIQUE</span><span class="err">索引或</span><span class="n">PRIMARY</span> <span class="n">KEY</span><span class="err">索引</span><span class="p">;</span>

    <span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">table_name</span> <span class="n">ADD</span> <span class="n">INDEX</span> <span class="n">index_name</span> <span class="p">(</span><span class="n">column_list</span><span class="p">)</span>
    <span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">table_name</span> <span class="n">ADD</span> <span class="n">UNIQUE</span> <span class="p">(</span><span class="n">column_list</span><span class="p">)</span>
    <span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">table_name</span> <span class="n">ADD</span> <span class="n">PRIMARY</span> <span class="n">KEY</span> <span class="p">(</span><span class="n">column_list</span><span class="p">)</span>
    
<span class="mi">2</span><span class="err">．</span><span class="n">CREATE</span> <span class="n">INDEX</span> <span class="o">-</span> <span class="n">CREATE</span> <span class="n">INDEX</span><span class="err">可对表增加普通索引或</span><span class="n">UNIQUE</span><span class="err">索引</span>

    <span class="n">CREATE</span> <span class="n">INDEX</span> <span class="n">index_name</span> <span class="n">ON</span> <span class="n">table_name</span> <span class="p">(</span><span class="n">column_list</span><span class="p">)</span>
    <span class="n">CREATE</span> <span class="n">UNIQUE</span> <span class="n">INDEX</span> <span class="n">index_name</span> <span class="n">ON</span> <span class="n">table_name</span> <span class="p">(</span><span class="n">column_list</span><span class="p">)</span>
</pre></div>
</div>
<h3>二 删除索引</h3>
<blockquote class="blockquote-normal">
                <p>如果从表中删除了某列,则索引会受到影响;对于多列组合的索引,如果删除其中的某列,则该列也会从索引中删除. 如果删除组成索引的所有列,则整个索引将被删除</p></blockquote><div class="code-wrapper"><div class="lang-label">Python</div><div class="highlight"><pre><span></span><span class="n">DROP</span> <span class="n">INDEX</span> <span class="n">index_name</span> <span class="n">ON</span> <span class="n">talbe_name</span>
<span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">table_name</span> <span class="n">DROP</span> <span class="n">INDEX</span> <span class="n">index_name</span>
<span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">table_name</span> <span class="n">DROP</span> <span class="n">PRIMARY</span> <span class="n">KEY</span>

<span class="err">前两条语句是等价的</span><span class="p">,</span><span class="err">删除掉</span><span class="n">table_name</span><span class="err">中的索引</span><span class="n">index_name</span><span class="p">;</span>
<span class="err">第</span><span class="mi">3</span><span class="err">条语句只在删除</span><span class="n">PRIMARY</span> <span class="n">KEY</span><span class="err">索引时使用</span><span class="p">,</span><span class="err">因为一个表只可能有一个</span><span class="n">PRIMARY</span> <span class="n">KEY</span><span class="err">索引</span><span class="p">,</span><span class="err">因此不需要指定索引名</span><span class="o">.</span><span class="err">如果没有创建</span><span class="n">PRIMARY</span> <span class="n">KEY</span><span class="err">索引</span><span class="p">,</span><span class="err">但表具有一个或多个</span><span class="n">UNIQUE</span><span class="err">索引</span><span class="p">,</span><span class="err">则</span><span class="n">MySQL</span><span class="err">将删除第一个</span><span class="n">UNIQUE</span><span class="err">索引</span>
</pre></div>
</div>
<h3>三 查看索引</h3>
<div class="code-wrapper"><div class="lang-label">Python</div><div class="highlight"><pre><span></span><span class="n">mysql</span><span class="o">&gt;</span> <span class="n">show</span> <span class="n">index</span> <span class="kn">from</span> <span class="nn">tblname</span><span class="p">;</span>
<span class="n">mysql</span><span class="o">&gt;</span> <span class="n">show</span> <span class="n">keys</span> <span class="kn">from</span> <span class="nn">tblname</span><span class="p">;</span>
</pre></div>
</div>
<p><strong>返回信息</strong></p>
<div class="code-wrapper"><div class="lang-label">Python</div><div class="highlight"><pre><span></span><span class="n">Table</span><span class="err">：表的名称</span>
<span class="n">Non_unique</span><span class="err">：如果索引不能包括重复词</span><span class="p">,</span><span class="err">则为</span><span class="mi">0</span><span class="p">;</span><span class="err">如果可以</span><span class="p">,</span><span class="err">则为</span><span class="mi">1</span>
<span class="n">Key_name</span><span class="err">：索引的名称</span>
<span class="n">Seq_in_index</span><span class="err">：索引中的列序列号</span><span class="p">,</span><span class="err">从</span><span class="mi">1</span><span class="err">开始</span>
<span class="n">Column_name</span><span class="err">：列名称</span>
<span class="n">Collation</span><span class="err">：列以什么方式存储在索引中</span><span class="p">;</span><span class="err">在</span><span class="n">MySQL</span><span class="err">中</span><span class="p">,</span><span class="err">有值‘</span><span class="n">A</span><span class="err">’</span><span class="p">(</span><span class="err">升序</span><span class="p">)</span><span class="err">或</span><span class="n">NULL</span><span class="p">(</span><span class="err">无分类</span><span class="p">);</span>
<span class="n">Cardinality</span><span class="err">：索引中唯一值的数目的估计值</span><span class="p">;</span><span class="err">通过运行</span><span class="n">ANALYZE</span> <span class="n">TABLE</span><span class="err">或</span><span class="n">myisamchk</span> <span class="o">-</span><span class="n">a</span><span class="err">可以更新</span><span class="p">;</span><span class="err">基数根据被存储为整数的统计数据来计数</span><span class="p">,</span><span class="err">所以即使对于小型表</span><span class="p">,</span><span class="err">该值也没有必要是精确的</span><span class="p">;</span><span class="err">基数越大</span><span class="p">,</span><span class="err">当进行联合时</span><span class="p">,</span><span class="n">MySQL</span><span class="err">使用该索引的机会就越大</span><span class="p">;</span>
<span class="n">Sub_part</span><span class="err">：如果列只是被部分地编入索引</span><span class="p">,</span><span class="err">则为被编入索引的字符的数目</span><span class="p">;</span><span class="err">如果整列被编入索引</span><span class="p">,</span><span class="err">则为</span><span class="n">NULL</span><span class="p">;</span>
<span class="n">Packed</span><span class="err">：指示关键字如何被压缩</span><span class="p">;</span><span class="err">如果没有被压缩</span><span class="p">,</span><span class="err">则为</span><span class="n">NULL</span><span class="p">;</span>
<span class="n">Null</span><span class="err">：如果列含有</span><span class="n">NULL</span><span class="p">,</span><span class="err">则含有</span><span class="n">YES</span><span class="p">;</span><span class="err">如果没有</span><span class="p">,</span><span class="err">则该列含有</span><span class="n">NO</span><span class="p">;</span>
<span class="n">Index_type</span><span class="err">：用过的索引方法</span><span class="p">(</span><span class="n">BTREE</span><span class="p">,</span> <span class="n">FULLTEXT</span><span class="p">,</span> <span class="n">HASH</span><span class="p">,</span> <span class="n">RTREE</span><span class="p">);</span>
<span class="n">Comment</span><span class="err">：更多评注</span><span class="p">;</span>
</pre></div>
</div>
<h2>索引选择原则</h2>
<div class="code-wrapper"><div class="lang-label">Python</div><div class="highlight"><pre><span></span><span class="mf">1.</span> <span class="err">较频繁的作为查询条件的字段应该创建索引</span>

<span class="mf">2.</span> <span class="err">唯一性太差的字段不适合单独创建索引</span><span class="p">(</span><span class="err">比如性别字段</span><span class="p">:</span><span class="err">只有男女</span><span class="mi">2</span><span class="err">个选择项</span><span class="p">),</span><span class="err">即使频繁作为查询条件</span>
<span class="mf">3.</span> <span class="err">更新非常频繁的字段不适合创建索引</span>
<span class="mf">4.</span> <span class="err">表记录比较少不适合创建索引</span>
<span class="mf">5.</span> <span class="err">索引的选择性较低不适合创建索引</span>
    <span class="c1"># SELECT count(DISTINCT(title))/count(*) AS Selectivity FROM employees.titles;  </span>
<span class="mf">6.</span> <span class="err">不要过度索引</span><span class="p">,</span><span class="err">只保持所需的索引</span>
</pre></div>
</div>
<h2>索引弊端</h2>
<blockquote class="blockquote-normal">
                <p>索引能够极大地提高数据检索效率,也能够改善排序分组操作的性能,但有不能忽略的一个问题就是索引是完全独立于基础数据之外的一部分数据;假设在Table ta 中的Column ca 创建了索引 idx<em>ta</em>ca,那么任何更新 Column ca 的操作,MySQL在更新表中 Column ca的同时,都须要更新Column ca 的索引数据,调整因为更新带来键值变化的索引信息;而如果没有对 Column ca 进行索引,MySQL要做的仅仅是更新表中 Column ca 的信息;这样,最明显的资源消耗就是增加了更新所带来的 IO 量和调整索引所致的计算量;此外,Column ca 的索引idx<em>ta</em>ca须要占用存储空间,而且随着 Table ta 数据量的增加,idx<em>ta</em>ca 所占用的空间也会不断增加,所以索引还会带来存储空间资源消耗的增加;</p></blockquote>
    </div>
    <div id="donate" style="text-align: center;">
        <a href="#donation-wrapper"><div onclick="displayDonation()" class="ui basic green button">打赏 <i class="red heart icon"></i></div></a>
    </div>
    <div id="comments">
    </div>
    <div id="more-words">
        <a href="/#entrys"><div id="more-words">MORE WORDS</div></a>
    </div>
</div>

        </div>

        <div id="footer" class="footer code">
            <span>© 1994 - 2018 willdx</span><b>@</b><a class="code" href="https://willdx.github.io">willdx.github.io</a>
            <br/>
            <span class="notprint">
                <span id="busuanzi_container_site_pv">
                    <i class="eye icon"></i><span id="busuanzi_value_site_pv" class="orange text"></span> pv
                </span>
                <b> | </b>
                <span id="busuanzi_container_site_uv">
                    <i class="user icon"></i><span id="busuanzi_value_site_uv" class="orange text"></span> uv
                </span>
                <br/>
            </span>
            <span>Power by <i class="github alternate icon"></i><a href="https://github.com/willdx/willdx.github.io">Github Page</a></span>
            <br/>
            <i class="green superpowers icon"></i>
        </div>
    </body>
    
    
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <script src="/assets/js/web.js"></script>
    <script>
        // 统计代码
        var skin = localStorage.getItem('skin');

        if (skin) {
            document.body.className = skin;
        } else {
            localStorage.setItem('skin', 'sk-default');
        }

        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-93231524-1', 'auto');
        ga('send', 'pageview');

        var wrappers = ["cats-wrapper", "donation-wrapper", "social-links-wrapper", "search-wrapper", "site-wrapper"]

        window.onload = function () {
            useWechat();
        }
    </script>
    
    <script src="/assets/3rd/gitalk.min.js"></script>
    <script>
    const gitalk = new Gitalk({
        clientID: '177af99888a292531873',
        clientSecret: '7c0927c7cdf0d94eed7dad0b238552c10ec6f53c',
        repo: 'willdx.github.io',
        owner: 'willdx',
        admin: ['willdx'],
        id: 'mysql索引相关',      // Ensure uniqueness and length less than 50
        distractionFreeMode: false,  // Facebook-like distraction free mode
        labels: ['gitment'],
        pagerDirection: "last",
    })
      
    gitalk.render('comments')
    </script>


</html>