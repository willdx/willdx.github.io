<html>
    <head>
        <meta charset="utf-8">
        
    
        <title> Djangoå­¦ä¹ ç¬”è®°05_æ•°æ®åº“å¢åˆ æ”¹æŸ¥ </title>
        <meta name="google-site-verification" content="xTBu05X0P9OJkoWvQWGdZimRp6nD6uqesWwTJ6v-BoA" />
        <meta name="google-site-verification" content="7Obwo8u7tT_NKgyJiirEB1qRpINEnh9BtyBa1WtiVjU" />
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="/assets/global.css">
        <link rel="stylesheet" href="/assets/theme.css">
        <link rel="stylesheet" href="/assets/semantic/components/button.min.css">
        <link rel="stylesheet" href="/assets/semantic/components/icon.min.css">
        <link rel="stylesheet" href="/assets/semantic/components/card.min.css">
        <link rel="stylesheet" href="/assets/semantic/components/list.min.css">
        <link rel="stylesheet" href="/assets/semantic/components/container.min.css">
        <link rel="stylesheet" href="/assets/semantic/components/input.min.css">
        <link rel="shortcut icon" href="/assets/images/favicon.ico" type="image/x-icon">
        <link rel="apple-touch-icon" sizes="128x128" href="/assets/images/favicon.ico">
        <link rel="icon" href="/assets/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="/assets/words.css">
    <link rel="stylesheet" href="/assets/monokai.css">
    <link rel="stylesheet" href="/assets/3rd/gitalk.css">
    <link rel="stylesheet" href="/assets/semantic/components/table.min.css">


        <style type="text/css"> 
        </style>
    </head>
    
    <body class="sk-default">
        <div id="site-wrapper" style="display: none;" class="topwrapper">
            <div class="ui container">
                <h3><span style="color: #fff;">ä¸»é¢˜é€‰æ‹©</span></h3>
                <table id="theme" style="width: 100%; color: #fff; margin-left: auto; margin-right: auto;">
                        <tbody>
                            <tr class="sk-mo" onclick="document.body.className = 'sk-mo'; localStorage.setItem('skin', 'sk-mo');">
                                <td class="title">å¢¨</td>
                                <td width="50%;"><div style="width: 100%;height: 25px; background: var(--main-bg);" class="bg"></div></td>
                            </tr>
                            <tr class="sk-green" onclick="document.body.className = 'sk-green'; localStorage.setItem('skin', 'sk-green');">
                                <td class="title">ç»¿</td>
                                <td width="50%;"><div style="width: 100%;height: 25px; background: var(--main-bg);" class="bg"></div></td>
                            </tr>
                            <tr class="sk-default" onclick="document.body.className = 'sk-default'; localStorage.setItem('skin', 'sk-default');">
                                <td class="title">é’</td>
                                <td width="50%;"><div style="width: 100%;height: 25px; background: var(--main-bg);" class="bg"></div></td>
                            </tr>
                            <tr class="sk-orange" onclick="document.body.className = 'sk-orange'; localStorage.setItem('skin', 'sk-orange');">
                                <td class="title">æ©˜</td>
                                <td width="50%;"><div style="width: 100%;height: 25px; background: var(--main-bg);" class="bg ">
                                </div></td>
                            </tr>
                        </tbody>
                    </table>
            </div>
        </div>
        <div id="cats-wrapper" style="display: none;" class="topwrapper">
            <div class="ui container">
                <table style="color: #fff;">
                    <tbody>
                        <tr>
                            <td valign="middle" align="center" width="50%">
                                <img src="/assets/cat-bn-avatar.jpeg" />
                                <div class="name">æ³¢å¦</div>
                                <div class="time">2017å¹´2æœˆ21å·</div>
                            </td>
                            <td valign="middle" align="center" width="50%">
                                <img src="/assets/cat-ss-avatar.png" />
                                <div class="name">ä¸‰ä¸‰</div>
                                <div class="time">2017å¹´4æœˆ10å·</div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
        </div>
        <div id="donation-wrapper" style="display: none;" class="topwrapper">
            <div class="ui container" style="text-align: center;">
                <div class="description">
                    <i class="teal quote left icon"></i>
                    å¦‚æœè§‰å¾—æˆ‘çš„æ–‡ç« å¯¹æ‚¨æœ‰ç”¨ï¼Œè¯·éšæ„æ‰“èµã€‚æ‚¨çš„æ”¯æŒå°†é¼“åŠ±æˆ‘ç»§ç»­åˆ›ä½œ!
                    <i class="teal quote right icon"></i>
                </div>

                <div class="ui buttons">
                    <button onclick="useWechat()" id="wechat" class="ui active secondary icon button">
                        å¾®ä¿¡
                    </button>
                    <button onclick="useAlipay()" id="alipay" class="ui secondary icon button">
                        æ”¯ä»˜å®
                    </button>
                </div>

                <div id="donation-qrcode">
                    <img id="wechat-qrcode-image" src="/assets/images/wechat.png">
                    <img id="alipay-qrcode-image" src="/assets/images/alipay.jpg">
                    <!-- <img id="donation-qrcode-image" src="/assets/images/wechat.png"> -->
                </div>
            </div>
        </div>

        <div id="social-links-wrapper" style="display: none;" class="topwrapper">
            <a href="mailto:1426409836@qq.com">
                <button class="ui mini red circular icon button">
                    <i class="mail icon"></i>
                </button>
            </a>
            <a href="https://github.com/willdx">
                <button class="ui mini grey circular github icon button">
                  <i class="github icon"></i>
                </button>
            </a>





            <button onclick="toggleWechat()" class="ui mini green circular icon button">
                <i class="wechat icon"></i>
            </button>
            
            <div id="wx" style="display: none;">
                <img src="/assets/images/wx.jpeg" />
            </div>
        </div>

        <div id="search-wrapper" style="display: none;" class="topwrapper">
            <div id="search" class="ui container">
              <input id="searchInput" onkeypress="return search(event)" type="search" placeholder="Search with google...">
            </div>
        </div>

        <div id="topbar"></div>

        <div id="triggers-wrapper">
            <div class="ui black mini buttons">
                <button onclick="toggleById(wrappers, 'site-wrapper')" class="ui secondary site-wrapper icon button">
                    <i class="snowflake icon"></i>
                </button>
    
                <button onclick="toggleById(wrappers, 'social-links-wrapper')" class="ui secondary social-links-wrapper icon button">
                    <i class="linkify icon"></i>
                </button>
                <button onclick="toggleById(wrappers, 'search-wrapper')" class="ui secondary search-wrapper icon button">
                    <i class="search icon"></i>
                </button>
                <!--
                <button onclick="toggleById(wrappers, 'cats-wrapper')" class="ui secondary cats-wrapper icon button">
                    ğŸ±
                </button>
                -->
                <button onclick="toggleById(wrappers, 'donation-wrapper')" class="ui secondary donation-wrapper icon button">
                    <i class="heart icon"></i>
                </button>
            </div>
        </div> 
    
        <div id="main">
            <div class="me">
                <div class="avatar">
                    <img src="/assets/images/avatar.png">
                </div>
    
                <h2 class="name">Will Dx</h2>

                <span class="sign">äººä¸–ä¸€èº«éœœé›ª, å½’æ¥ä»æ˜¯å°‘å¹´.</span>
            </div>
            
            <div class="top menu">
                <div class="ui horizontal bulleted link list">
                    <a href="/" class="item">
                        ä¸»é¡µ
                    </a>
                    <a href="/tweet.html" class="item">
                        æ¨ç‰¹
                    </a>
                    <a href="/about.html" class="item">
                        å…³äºæˆ‘
                    </a>
                    <a href="#social-links-wrapper" style="cursor: pointer;" class="item" onclick="toggleById(wrappers, 'social-links-wrapper')">
                        è”ç³»
                    </a>
                    <a href="/rss.xml" class="item">
                        RSS 
                    </a>
                </div>
            </div>

            
<div id="content" class="typo ui container">
    <div id="article">
        <h1>Djangoå­¦ä¹ ç¬”è®°05_æ•°æ®åº“å¢åˆ æ”¹æŸ¥</h1>
        <h4>Posted April 07, 2017</h4>
        <h1>æ•°æ®åº“æ¨¡å‹çš„Meta</h1>

<p><a href="https://wizardforcel.gitbooks.io/django-chinese-docs-18/content/2_1_3_Meta%20options.html">åˆ›å»ºæ•°æ®åº“æ¨¡å‹æ—¶å¸¸ç”¨metaå­—æ®µ</a></p>

<p>Django æ¨¡å‹æ˜¯ä¸æ•°æ®åº“ç›¸å…³çš„ï¼Œä¸æ•°æ®åº“ç›¸å…³çš„ä»£ç ä¸€èˆ¬å†™åœ¨ models.py ä¸­ï¼ŒDjango æ”¯æŒ sqlite3, MySQL, PostgreSQLç­‰æ•°æ®åº“ï¼Œåªéœ€è¦åœ¨settings.pyä¸­é…ç½®å³å¯ï¼Œä¸ç”¨æ›´æ”¹models.pyä¸­çš„ä»£ç </p>

<ul>
<li>æ–°å»ºé¡¹ç›®å’Œåº”ç”¨</li>
</ul>
<div class="code-wrapper"><div class="lang-label">Python</div><div class="highlight"><pre><span></span><span class="n">django</span><span class="o">-</span><span class="n">admin</span><span class="o">.</span><span class="n">py</span> <span class="n">startproject</span> <span class="n">xxx_project</span>
<span class="n">cd</span> <span class="n">xxx_project</span>

<span class="c1"># æ–°å»ºä¸€ä¸ªapp</span>
<span class="n">django</span><span class="o">-</span><span class="n">admin</span><span class="o">.</span><span class="n">py</span> <span class="n">startapp</span> <span class="n">xxx_app</span> 
<span class="err">ç­‰åŒäº</span> 
<span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">startapp</span> <span class="n">xxx_app</span>
</pre></div>
</div>
<p>é‚£projectå’Œappä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿ</p>

<p><code>ä¸€ä¸ªé¡¹ç›®ä¸€èˆ¬åŒ…å«å¤šä¸ªappï¼Œä¸€ä¸ªappä¹Ÿå¯ä»¥ç”¨åœ¨å¤šä¸ªé¡¹ç›®ä¸­</code>(ä½†æ˜¯, ä¸€èˆ¬éƒ½æ˜¯ä¸€ä¸ªé¡¹ç›®åŒ…å«å¤šä¸ªapp)</p>

<h2>ç›®å½•ç»“æ„</h2>
<div class="code-wrapper"><div class="lang-label">Python</div><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">willdjango</span><span class="p">)</span> <span class="err">âœ</span>  <span class="n">willdjango</span> <span class="n">tree</span> <span class="o">-</span><span class="n">L</span> <span class="mi">3</span>
<span class="o">.</span>
<span class="err">â”œâ”€â”€</span> <span class="n">app</span>
<span class="err">â”‚</span>   <span class="err">â”œâ”€â”€</span> <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
<span class="err">â”‚</span>   <span class="err">â”œâ”€â”€</span> <span class="n">admin</span><span class="o">.</span><span class="n">py</span>
<span class="err">â”‚</span>   <span class="err">â”œâ”€â”€</span> <span class="n">migrations</span>
<span class="err">â”‚</span>   <span class="err">â”‚</span>   <span class="err">â””â”€â”€</span> <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
<span class="err">â”‚</span>   <span class="err">â”œâ”€â”€</span> <span class="n">models</span><span class="o">.</span><span class="n">py</span>
<span class="err">â”‚</span>   <span class="err">â”œâ”€â”€</span> <span class="n">tests</span><span class="o">.</span><span class="n">py</span>
<span class="err">â”‚</span>   <span class="err">â””â”€â”€</span> <span class="n">views</span><span class="o">.</span><span class="n">py</span>
<span class="err">â”œâ”€â”€</span> <span class="n">db</span><span class="o">.</span><span class="n">sqlite3</span>
<span class="err">â”œâ”€â”€</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span>
<span class="err">â””â”€â”€</span> <span class="n">willdjango</span>
    <span class="err">â”œâ”€â”€</span> <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
    <span class="err">â”œâ”€â”€</span> <span class="n">settings</span><span class="o">.</span><span class="n">py</span>
    <span class="err">â”œâ”€â”€</span> <span class="n">urls</span><span class="o">.</span><span class="n">py</span>
    <span class="err">â””â”€â”€</span> <span class="n">wsgi</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<h2>ä¸€èˆ¬æ¶‰åŠåˆ°æ•°æ®åº“æ“ä½œæˆ‘ä»¬çš„é€»è¾‘æ˜¯</h2>
<div class="code-wrapper">
          <div class="lang-label">Raw</div>
        
<div class="highlight"><pre>åˆ›å»ºæ•°æ®åº“ï¼Œè®¾è®¡è¡¨ç»“æ„å’Œå­—æ®µ
ä½¿ç”¨ MySQLdb æ¥è¿æ¥æ•°æ®åº“ï¼Œå¹¶ç¼–å†™æ•°æ®è®¿é—®å±‚ä»£ç 
ä¸šåŠ¡é€»è¾‘å±‚å»è°ƒç”¨æ•°æ®è®¿é—®å±‚æ‰§è¡Œæ•°æ®åº“æ“ä½œ</pre></div></div>

<h2>ä½¿ç”¨Djangoæ“ä½œæ•°æ®åº“</h2>

<h3>1.è®¾å®šmodel .py</h3>
<div class="code-wrapper"><div class="lang-label">Python</div><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">UserInfo</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">username</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
    <span class="n">password</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
</pre></div>
</div>
<h3>2.ä¿®æ”¹settings.pyæ–‡ä»¶</h3>

<h4>2.1 å°†APPæ·»åŠ åˆ°install_appsé€‰é¡¹ä¸­</h4>
<div class="code-wrapper"><div class="lang-label">Python</div><div class="highlight"><pre><span></span><span class="n">INSTALLED_APPS</span> <span class="o">=</span> <span class="p">[</span>
<span class="s1">&#39;django.contrib.admin&#39;</span><span class="p">,</span>
<span class="s1">&#39;django.contrib.auth&#39;</span><span class="p">,</span>
<span class="s1">&#39;django.contrib.contenttypes&#39;</span><span class="p">,</span>
<span class="s1">&#39;django.contrib.sessions&#39;</span><span class="p">,</span>
<span class="s1">&#39;django.contrib.messages&#39;</span><span class="p">,</span>
<span class="s1">&#39;django.contrib.staticfiles&#39;</span><span class="p">,</span>
<span class="s1">&#39;app&#39;</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
<h4>2.2 é»˜è®¤ä½¿ç”¨SQLlite3æ•°æ®åº“ï¼Œæµ‹è¯•æ—¶ç”¨é»˜è®¤çš„å³å¯</h4>
<div class="code-wrapper"><div class="lang-label">Python</div><div class="highlight"><pre><span></span><span class="n">vim</span> <span class="n">willdjango</span><span class="o">/</span><span class="n">settings</span><span class="o">.</span><span class="n">py</span>

<span class="n">DATABASES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;ENGINE&#39;</span><span class="p">:</span> <span class="s1">&#39;django.db.backends.sqlite3&#39;</span><span class="p">,</span>
        <span class="s1">&#39;NAME&#39;</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">BASE_DIR</span><span class="p">,</span> <span class="s1">&#39;db.sqlite3&#39;</span><span class="p">),</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div><blockquote class="blockquote-normal">
                <p>æ•°æ®åº“ä¿¡æ¯å¯ä»¥è‡ªå®šä¹‰:<a href="https://docs.djangoproject.com/en/1.9/ref/settings/#databases">å®˜æ–¹é“¾æ¥</a></p></blockquote>
<p>è‹¥ä½¿ç”¨mysql çš„è¯ï¼Œå¦‚ä¸‹é…ç½®ï¼š</p>
<div class="code-wrapper"><div class="lang-label">Python</div><div class="highlight"><pre><span></span><span class="n">DATABASES</span> <span class="o">=</span> <span class="p">{</span>
<span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">&#39;ENGINE&#39;</span><span class="p">:</span> <span class="s1">&#39;django.db.backends.postgresql&#39;</span><span class="p">,</span>
    <span class="s1">&#39;NAME&#39;</span><span class="p">:</span> <span class="s1">&#39;mydatabase&#39;</span><span class="p">,</span>
    <span class="s1">&#39;USER&#39;</span><span class="p">:</span> <span class="s1">&#39;mydatabaseuser&#39;</span><span class="p">,</span>
    <span class="s1">&#39;PASSWORD&#39;</span><span class="p">:</span> <span class="s1">&#39;mypassword&#39;</span><span class="p">,</span>
    <span class="s1">&#39;HOST&#39;</span><span class="p">:</span> <span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span>
    <span class="s1">&#39;PORT&#39;</span><span class="p">:</span> <span class="s1">&#39;5432&#39;</span><span class="p">,</span>
<span class="p">}</span>
<span class="p">}</span>

<span class="c1">#è‹¥ä½¿ç”¨postgresql</span>
<span class="n">DATABASES</span> <span class="o">=</span> <span class="p">{</span>
<span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">&#39;ENGINE&#39;</span><span class="p">:</span> <span class="s1">&#39;django.db.backends.postgresql&#39;</span><span class="p">,</span>
    <span class="s1">&#39;USER&#39;</span><span class="p">:</span> <span class="s1">&#39;mydatabaseuser&#39;</span><span class="p">,</span>
    <span class="s1">&#39;NAME&#39;</span><span class="p">:</span> <span class="s1">&#39;mydatabase&#39;</span><span class="p">,</span>
    <span class="s1">&#39;TEST&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;NAME&#39;</span><span class="p">:</span> <span class="s1">&#39;mytestdatabase&#39;</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">},</span>
<span class="p">}</span>
</pre></div>
</div><blockquote class="blockquote-normal">
                <p>Djangoé»˜è®¤ä¸åˆ›å»ºæ•°æ®åº“ï¼Œéœ€è¦æ‰‹åŠ¨åˆ›å»ºæ•°æ®åº“ï¼Œç„¶åä½¿ç”¨Djangoé…ç½®ç”Ÿæˆæ•°æ®è¡¨</p></blockquote>
<h4>2.3 æ‰§è¡Œå‘½ä»¤</h4>
<div class="code-wrapper"><div class="lang-label">Python</div><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">willdjango</span><span class="p">)</span> <span class="err">âœ</span>  <span class="n">willdjango</span> <span class="sb">`python manage.py makemigrations`</span>
<span class="n">Migrations</span> <span class="k">for</span> <span class="s1">&#39;app&#39;</span><span class="p">:</span>
  <span class="mo">0001</span><span class="n">_initial</span><span class="o">.</span><span class="n">py</span><span class="p">:</span>
    <span class="o">-</span> <span class="n">Create</span> <span class="n">model</span> <span class="n">UserInfo</span>  <span class="sb">`ï¼ƒåˆ›å»ºMigrations`</span>
<span class="p">(</span><span class="n">willdjango</span><span class="p">)</span> <span class="err">âœ</span>  <span class="n">willdjango</span> <span class="sb">`python manage.py  migrate`</span>
<span class="n">Operations</span> <span class="n">to</span> <span class="n">perform</span><span class="p">:</span>
  <span class="n">Synchronize</span> <span class="n">unmigrated</span> <span class="n">apps</span><span class="p">:</span> <span class="n">staticfiles</span><span class="p">,</span> <span class="n">messages</span>
  <span class="n">Apply</span> <span class="nb">all</span> <span class="n">migrations</span><span class="p">:</span> <span class="n">admin</span><span class="p">,</span> <span class="n">app</span><span class="p">,</span> <span class="n">contenttypes</span><span class="p">,</span> <span class="n">auth</span><span class="p">,</span> <span class="n">sessions</span>
<span class="n">Synchronizing</span> <span class="n">apps</span> <span class="n">without</span> <span class="n">migrations</span><span class="p">:</span>
  <span class="n">Creating</span> <span class="n">tables</span><span class="o">...</span>
    <span class="n">Running</span> <span class="n">deferred</span> <span class="n">SQL</span><span class="o">...</span>
  <span class="n">Installing</span> <span class="n">custom</span> <span class="n">SQL</span><span class="o">...</span>
<span class="n">Running</span> <span class="n">migrations</span><span class="p">:</span>       <span class="sb">`ï¼ƒæ‰§è¡ŒMigrations`</span>
  <span class="n">Rendering</span> <span class="n">model</span> <span class="n">states</span><span class="o">...</span> <span class="n">DONE</span>
  <span class="n">Applying</span> <span class="n">contenttypes</span><span class="o">.</span><span class="mo">0001</span><span class="n">_initial</span><span class="o">...</span> <span class="n">OK</span>
  <span class="n">Applying</span> <span class="n">auth</span><span class="o">.</span><span class="mo">0001</span><span class="n">_initial</span><span class="o">...</span> <span class="n">OK</span>
  <span class="n">Applying</span> <span class="n">admin</span><span class="o">.</span><span class="mo">0001</span><span class="n">_initial</span><span class="o">...</span> <span class="n">OK</span>
  <span class="n">Applying</span> <span class="n">app</span><span class="o">.</span><span class="mo">0001</span><span class="n">_initial</span><span class="o">...</span> <span class="n">OK</span>
  <span class="n">Applying</span> <span class="n">contenttypes</span><span class="o">.</span><span class="mo">0002</span><span class="n">_remove_content_type_name</span><span class="o">...</span> <span class="n">OK</span>
  <span class="n">Applying</span> <span class="n">auth</span><span class="o">.</span><span class="mo">0002</span><span class="n">_alter_permission_name_max_length</span><span class="o">...</span> <span class="n">OK</span>
  <span class="n">Applying</span> <span class="n">auth</span><span class="o">.</span><span class="mo">0003</span><span class="n">_alter_user_email_max_length</span><span class="o">...</span> <span class="n">OK</span>
  <span class="n">Applying</span> <span class="n">auth</span><span class="o">.</span><span class="mo">0004</span><span class="n">_alter_user_username_opts</span><span class="o">...</span> <span class="n">OK</span>
  <span class="n">Applying</span> <span class="n">auth</span><span class="o">.</span><span class="mo">0005</span><span class="n">_alter_user_last_login_null</span><span class="o">...</span> <span class="n">OK</span>
  <span class="n">Applying</span> <span class="n">auth</span><span class="o">.</span><span class="mo">0006</span><span class="n">_require_contenttypes_0002</span><span class="o">...</span> <span class="n">OK</span>
  <span class="n">Applying</span> <span class="n">sessions</span><span class="o">.</span><span class="mo">0001</span><span class="n">_initial</span><span class="o">...</span> <span class="n">OK</span>
</pre></div>
</div>
<h4>2.5 ä¿®æ”¹model.py æ–‡ä»¶ä¹‹ååªéœ€è¦é‡æ–°æ‰§è¡Œä¸Šé¢2æ¡å‘½ä»¤å³å¯ï¼Œå°±èƒ½ä½¿æ”¹å˜ç”Ÿæ•ˆ</h4>

<h3>3.python manage shell æ“ä½œæ•°æ®åº“æ•°æ®</h3>
<div class="code-wrapper"><div class="lang-label">Python</div><div class="highlight"><pre><span></span><span class="err">ï¼ƒæ¨¡å‹</span>
<span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>
<span class="k">class</span> <span class="nc">UserInfo</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">username</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
    <span class="n">password</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>  
    <span class="k">def</span>  <span class="fm">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">u</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">,</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">username</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">password</span><span class="p">)</span>

<span class="err">ï¼ƒæ·»åŠ ç¯å¢ƒå˜é‡</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;DJANGO_SETTINGS_MODULE&quot;</span><span class="p">,</span> <span class="s2">&quot;willdjango.settings&quot;</span><span class="p">)</span>
<span class="err">ï¼ƒå¯¼å…¥å¯¹åº”çš„æ¨¡å‹ç±»</span>
<span class="kn">from</span> <span class="nn">app.models</span> <span class="kn">import</span> <span class="n">UserInfo</span>

<span class="c1">#åˆ›å»ºæ•°æ®</span>
<span class="n">UserInfo</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s2">&quot;daixiang&quot;</span><span class="p">,</span><span class="n">password</span><span class="o">=</span><span class="s2">&quot;123456&quot;</span><span class="p">)</span>

<span class="c1">#è·å–æ‰€æœ‰æ•°æ®</span>
<span class="n">UserInfo</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>

<span class="c1">#è·å–å•æ¡æ•°æ®</span>
    <span class="c1">#getæ–¹æ³•ï¼šè¾“å‡ºå•æ¡è®°å½•çš„æ—¶å€™ä½¿ç”¨ï¼Œè‹¥è¿”å›ç»“æœæœ‰å¤šæ¡ï¼Œåˆ™ä¼šè§¦å‘å¼‚å¸¸</span>
        <span class="n">UserInfo</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s2">&quot;daixiang&quot;</span><span class="p">)</span>

<span class="err">ï¼ƒæ•°æ®è¿‡æ»¤</span>
    <span class="err">ï¼ƒ</span><span class="nb">filter</span><span class="err">æ–¹æ³•ï¼šå½“è¾“å…¥ç»“æœä¸ºå¤šæ¡è®°å½•æ—¶ä½¿ç”¨</span>
        <span class="n">UserInfo</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s2">&quot;daixiang&quot;</span><span class="p">)</span>

<span class="c1"># æ•°æ®æ˜ å°„</span>
    <span class="c1"># values(&quot;$arg1&quot;,&quot;$arg2&quot;) è·å–æŒ‡å®šçš„å‚æ•°åç§°çš„å€¼        </span>

<span class="err">ï¼ƒæ•°æ®æ’åº</span>
    <span class="c1">#order_by(&quot;&quot;)æ–¹æ³•,æ¡ä»¶å‰åŠ ä¸€ä¸ªï¼å·è¡¨ç¤ºåå‘æ’åº</span>
        <span class="err">æ­£å‘ï¼š</span><span class="n">UserInfo</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s2">&quot;daixiang&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s2">&quot;username&quot;</span><span class="p">)</span> 
        <span class="err">åå‘ï¼š</span><span class="n">UserInfo</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s2">&quot;daixiang&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s2">&quot;ï¼username&quot;</span><span class="p">)</span> 

<span class="err">ï¼ƒæ•°æ®åˆ‡å‰²</span>
    <span class="c1">#åˆ‡ç‰‡çš„æ–¹å¼ï¼»0:1ï¼½</span>
        <span class="n">UserInfo</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;daixiang&#39;</span><span class="p">)</span><span class="err">ï¼»</span><span class="mi">0</span><span class="err">ï¼½</span>
    <span class="err">ï¼ƒä¸æ”¯æŒ</span><span class="n">python</span><span class="err">çš„è´Ÿç´¢å¼•ï¼Œç”¨ç±»ä¼¼æ–¹æ³•æ›¿ä»£</span>
        <span class="n">UserInfo</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;ï¼daixiang&#39;</span><span class="p">)</span><span class="err">ï¼»</span><span class="mi">0</span><span class="err">ï¼½</span>

<span class="err">ï¼ƒæ•°æ®æ›´æ–°</span>
    <span class="err">ï¼ƒ</span><span class="n">update</span><span class="err">æ–¹æ³•ï¼š</span><span class="n">update</span><span class="p">()</span><span class="err">æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªæ•´å‹æ•°å€¼ï¼Œè¡¨ç¤ºå—å½±å“çš„è®°å½•æ¡æ•°</span>

<span class="c1">#åˆ é™¤æ•°æ®</span>
    <span class="n">UserInfo</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;daixiang&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
    <span class="n">UserInfo</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span> <span class="c1">#Djangoå‡ºäºå®‰å…¨æ€§è€ƒè™‘ï¼Œå¦‚æœéœ€è¦åˆ é™¤æ‰€æœ‰çš„æ•°æ®éœ€è¦åŠ ä¸Šallä¹‹ådelete()</span>

<span class="err">ï¼ƒæ•°æ®èšåˆ</span>
    <span class="kn">from</span> <span class="nn">django.db.models</span> <span class="kn">import</span> <span class="n">Min</span><span class="p">,</span><span class="n">Max</span><span class="p">,</span><span class="n">Sum</span> 
    <span class="n">UserInfo</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">aggregate</span><span class="p">(</span><span class="n">Max</span><span class="p">(</span><span class="s1">&#39;guest_id&#39;</span><span class="p">))</span>

<span class="c1"># è·å–Djangoæ“ä½œæ•°æ®åº“å‘½ä»¤çš„åº•å±‚SQLè¯­å¥</span>
    <span class="n">obj</span> <span class="o">=</span> <span class="n">UserInfo</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">,</span><span class="s1">&#39;password&#39;</span><span class="p">)</span>
    <span class="k">print</span>  <span class="n">obj</span><span class="o">.</span><span class="n">query</span>
</pre></div>
</div>
<h3>å…³äºæŸ¥è¯¢æ¡ä»¶</h3>
<div class="code-wrapper"><div class="lang-label">Python</div><div class="highlight"><pre><span></span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="n">__contains</span> <span class="err">ç±»ä¼¼</span><span class="n">mysql</span><span class="err">çš„</span><span class="n">like</span><span class="err">æ¨¡ç³ŠæŸ¥è¯¢ï¼š</span> <span class="n">UserInfo</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">name__contains</span><span class="o">=</span><span class="s1">&#39;daixiang&#39;</span><span class="err">ï¼‰</span>
<span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="n">__icontains</span> <span class="err">è¡¨ç¤ºå¤§å°å†™æ— å…³çš„æ¨¡ç³ŠæŸ¥è¯¢ï¼š</span><span class="n">UserInfo</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">name__icontains</span><span class="o">=</span><span class="s1">&#39;daixiang&#39;</span><span class="p">)</span>
<span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="n">__startswith</span> <span class="err">ï¼Œ</span><span class="s1">&#39;istartswith&#39;</span>
<span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="n">__endswith</span><span class="err">ï¼Œ</span><span class="s1">&#39;iendswith&#39;</span>
<span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="n">__range</span>
<span class="p">(</span><span class="mi">6</span><span class="p">)</span><span class="s1">&#39;gt&#39;</span><span class="p">,</span><span class="s1">&#39;lt&#39;</span> 
<span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="s1">&#39;in&#39;</span>
<span class="p">(</span><span class="mi">8</span><span class="p">)</span><span class="s1">&#39;isnull&#39;</span>
</pre></div>
</div>
<h3>ç›´æ¥å†™SQLçš„æ–¹å¼æ“ä½œæ•°æ®åº“</h3>
<div class="code-wrapper">
          <div class="lang-label">Raw</div>
        
<div class="highlight"><pre>/*æ³¨æ„å‚æ•°ä¼ é€’çš„æ–¹æ³•ä¸èƒ½ç›´æ¥ä½¿ç”¨æ ¼å¼åŒ–å­—ç¬¦ä¸²:"%s" % å‚æ•° ,è€Œæ˜¯ä½¿ç”¨å‚æ•°åˆ—è¡¨çš„æ–¹å¼ä¼ é€’*/</pre></div></div>
<div class="code-wrapper"><div class="lang-label">Python</div><div class="highlight"><pre><span></span><span class="err">ï¼ƒ</span><span class="p">(</span><span class="err">æ¨è</span><span class="p">)</span><span class="err">æ–¹æ³•</span><span class="mi">1</span><span class="p">:</span><span class="n">connection</span> 
    <span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">connection</span>
    <span class="n">cursor</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;select * from userinfo where username=</span><span class="si">%s</span><span class="s2">;&quot;&quot;&quot;</span><span class="p">,[</span><span class="s2">&quot;daixiang&quot;</span><span class="p">])</span> <span class="c1">#[&quot;daixiang&quot;]ä¸ºå‚æ•°åˆ—è¡¨</span>
    <span class="n">row</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
    <span class="k">print</span> <span class="n">row</span>
    <span class="c1">#ä¿è¯æ›´æ”¹æäº¤åˆ°æ•°æ®åº“</span>
    <span class="n">transaction</span><span class="o">.</span><span class="n">commit_unless_managed</span><span class="p">()</span>  
        
<span class="err">ï¼ƒæ–¹æ³•</span><span class="mi">2</span><span class="p">:</span><span class="n">raw</span><span class="p">()</span>
    <span class="err">ï¼ƒ</span><span class="n">raw</span><span class="p">()</span><span class="err">æ–¹æ³•æœ‰é™åˆ¶ï¼š</span><span class="n">UPDATE</span><span class="p">,</span> <span class="n">INSERT</span><span class="p">,</span> <span class="n">DELETE</span><span class="err">ç­‰æ–¹æ³•ä¸èƒ½å®ç°</span>
    <span class="kn">from</span> <span class="nn">app.models</span> <span class="kn">import</span> <span class="n">UserInfo</span>
    <span class="n">sql</span> <span class="o">=</span> <span class="s2">&quot;select * from userinfo where username=</span><span class="si">%s</span><span class="s2">&quot;</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">UserInfo</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">raw</span><span class="p">(</span><span class="n">sql</span><span class="p">,[</span><span class="s2">&quot;daixiang&quot;</span><span class="p">]):</span>
        <span class="k">print</span> <span class="n">i</span>
</pre></div>
</div>
<h2>Djangoæ¨¡å‹ç›¸å…³</h2>

<h3>è¡¨è®¾è®¡åŸºç¡€çŸ¥è¯†</h3>

<h3>1.Djangoæ¨¡å‹çš„å­—æ®µç±»å‹</h3>
<div class="code-wrapper"><div class="lang-label">Python</div><div class="highlight"><pre><span></span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="n">models</span><span class="o">.</span><span class="n">AutoField</span><span class="err">ã€€ã€€</span>
    <span class="err">ï¼ƒè‡ªå¢åˆ—</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="mi">11</span><span class="p">),</span><span class="err">å¦‚æœæ²¡æœ‰çš„è¯ï¼Œé»˜è®¤ä¼šç”Ÿæˆä¸€ä¸ªåç§°ä¸º</span> <span class="nb">id</span> <span class="err">çš„åˆ—ï¼Œå¦‚æœè¦æ˜¾ç¤ºçš„è‡ªå®šä¹‰ä¸€ä¸ªè‡ªå¢åˆ—ï¼Œå¿…é¡»å°†è¯¥åˆ—è®¾ç½®ä¸ºä¸»é”®</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span>
<span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="err">ã€€</span>
    <span class="err">ï¼ƒå­—ç¬¦ä¸²å­—æ®µï¼Œå¿…é¡»</span> <span class="n">max_length</span> <span class="err">å‚æ•°</span>
<span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="err">ã€€ã€€</span>
    <span class="err">ï¼ƒå¸ƒå°”ç±»å‹</span><span class="o">=</span><span class="n">tinyint</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="err">ï¼Œä¸èƒ½ä¸ºç©ºï¼Œ</span><span class="n">Blank</span><span class="o">=</span><span class="bp">True</span>
<span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="n">models</span><span class="o">.</span><span class="n">ComaSeparatedIntegerField</span><span class="err">ã€€ã€€</span>
    <span class="err">ï¼ƒç”¨é€—å·åˆ†å‰²çš„æ•°å­—</span><span class="o">=</span><span class="n">varchar</span><span class="err">ï¼Œç»§æ‰¿</span><span class="n">CharField</span><span class="err">ï¼Œæ‰€ä»¥å¿…é¡»</span> <span class="n">max_lenght</span> <span class="err">å‚æ•°</span>
<span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="n">models</span><span class="o">.</span><span class="n">DateField</span><span class="err">ã€€ã€€</span>
    <span class="err">ï¼ƒæ—¥æœŸç±»å‹</span> <span class="n">date</span><span class="err">ï¼Œå¯¹äºå‚æ•°ï¼Œ</span><span class="n">auto_now</span> <span class="o">=</span> <span class="bp">True</span><span class="err">ï¼Œåˆ™æ¯æ¬¡æ›´æ–°éƒ½ä¼šæ›´æ–°è¿™ä¸ªæ—¶é—´ï¼›</span><span class="n">auto_now_add</span> <span class="err">åˆ™åªæ˜¯ç¬¬ä¸€æ¬¡åˆ›å»ºæ·»åŠ ï¼Œä¹‹åçš„æ›´æ–°ä¸å†æ”¹å˜ã€‚</span>
<span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="err">ã€€</span>
    <span class="err">ï¼ƒæ—¥æœŸç±»å‹</span> <span class="n">datetime</span><span class="err">ï¼ŒåŒ</span><span class="n">DateField</span><span class="err">çš„å‚æ•°</span>
<span class="p">(</span><span class="mi">7</span><span class="p">)</span> <span class="n">models</span><span class="o">.</span><span class="n">Decimal</span><span class="err">ã€€ã€€</span>
    <span class="err">ï¼ƒåè¿›åˆ¶å°æ•°ç±»å‹</span> <span class="o">=</span> <span class="n">decimal</span><span class="err">ï¼Œå¿…é¡»æŒ‡å®šæ•´æ•°ä½</span><span class="n">max_digits</span><span class="err">å’Œå°æ•°ä½</span><span class="n">decimal_places</span>
<span class="p">(</span><span class="mi">8</span><span class="p">)</span> <span class="n">models</span><span class="o">.</span><span class="n">EmailField</span><span class="err">ã€€ã€€</span>
    <span class="err">ï¼ƒå­—ç¬¦ä¸²ç±»å‹ï¼ˆæ­£åˆ™è¡¨è¾¾å¼é‚®ç®±ï¼‰</span> <span class="o">=</span><span class="n">varchar</span> <span class="err">å¯¹å­—ç¬¦ä¸²è¿›è¡Œæ­£åˆ™è¡¨è¾¾å¼</span>
<span class="p">(</span><span class="mi">9</span><span class="p">)</span> <span class="n">models</span><span class="o">.</span><span class="n">FloatField</span><span class="err">ã€€</span>
    <span class="err">ï¼ƒæµ®ç‚¹ç±»å‹</span> <span class="o">=</span> <span class="n">double</span>
<span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="err">ã€€ï¼ƒæ•´å½¢</span>
<span class="p">(</span><span class="mi">11</span><span class="p">)</span> <span class="n">models</span><span class="o">.</span><span class="n">BigIntegerField</span><span class="err">ã€€ï¼ƒé•¿æ•´å½¢</span>
<span class="err">ã€€ã€€</span><span class="n">integer_field_ranges</span> <span class="o">=</span> <span class="p">{</span>
<span class="err">ã€€ã€€ã€€ã€€</span><span class="s1">&#39;SmallIntegerField&#39;</span><span class="p">:</span> <span class="p">(</span><span class="o">-</span><span class="mi">32768</span><span class="p">,</span> <span class="mi">32767</span><span class="p">),</span>
<span class="err">ã€€ã€€ã€€ã€€</span><span class="s1">&#39;IntegerField&#39;</span><span class="p">:</span> <span class="p">(</span><span class="o">-</span><span class="mi">2147483648</span><span class="p">,</span> <span class="mi">2147483647</span><span class="p">),</span>
<span class="err">ã€€ã€€ã€€ã€€</span><span class="s1">&#39;BigIntegerField&#39;</span><span class="p">:</span> <span class="p">(</span><span class="o">-</span><span class="mi">9223372036854775808</span><span class="p">,</span> <span class="mi">9223372036854775807</span><span class="p">),</span>
<span class="err">ã€€ã€€ã€€ã€€</span><span class="s1">&#39;PositiveSmallIntegerField&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">32767</span><span class="p">),</span>
<span class="err">ã€€ã€€ã€€ã€€</span><span class="s1">&#39;PositiveIntegerField&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2147483647</span><span class="p">),</span>
<span class="err">ã€€ã€€</span><span class="p">}</span>
<span class="p">(</span><span class="mi">12</span><span class="p">)</span> <span class="n">models</span><span class="o">.</span><span class="n">IPAddressField</span><span class="err">ã€€ï¼ƒå­—ç¬¦ä¸²ç±»å‹ï¼ˆ</span><span class="n">ip4</span><span class="err">æ­£åˆ™è¡¨è¾¾å¼ï¼‰</span>
<span class="p">(</span><span class="mi">13</span><span class="p">)</span> <span class="n">models</span><span class="o">.</span><span class="n">GenericIPAddressField</span><span class="err">ã€€ï¼ƒå­—ç¬¦ä¸²ç±»å‹ï¼ˆ</span><span class="n">ip4</span><span class="err">å’Œ</span><span class="n">ip6</span><span class="err">æ˜¯å¯é€‰çš„ï¼‰</span>
<span class="err">ã€€ã€€å‚æ•°</span><span class="n">protocol</span><span class="err">å¯ä»¥æ˜¯ï¼š</span><span class="n">both</span><span class="err">ã€</span><span class="n">ipv4</span><span class="err">ã€</span><span class="n">ipv6</span><span class="err">ï¼›éªŒè¯æ—¶ï¼Œä¼šæ ¹æ®è®¾ç½®æŠ¥é”™</span>
<span class="p">(</span><span class="mi">14</span><span class="p">)</span> <span class="n">models</span><span class="o">.</span><span class="n">NullBooleanField</span><span class="err">ã€€ã€€ï¼ƒå…è®¸ä¸ºç©ºçš„å¸ƒå°”ç±»å‹</span>
<span class="p">(</span><span class="mi">15</span><span class="p">)</span> <span class="n">models</span><span class="o">.</span><span class="n">PositiveIntegerFiel</span><span class="err">ã€€ã€€ï¼ƒæ­£</span><span class="n">Integer</span>
<span class="p">(</span><span class="mi">16</span><span class="p">)</span> <span class="n">models</span><span class="o">.</span><span class="n">PositiveSmallIntegerField</span><span class="err">ã€€ã€€ï¼ƒæ­£</span><span class="n">smallInteger</span>
<span class="p">(</span><span class="mi">17</span><span class="p">)</span> <span class="n">models</span><span class="o">.</span><span class="n">SlugField</span><span class="err">ã€€ã€€ï¼ƒå‡å·ã€ä¸‹åˆ’çº¿ã€å­—æ¯ã€æ•°å­—</span>
<span class="p">(</span><span class="mi">18</span><span class="p">)</span> <span class="n">models</span><span class="o">.</span><span class="n">SmallIntegerField</span><span class="err">ã€€ã€€ï¼ƒæ•°å­—</span>
<span class="err">ã€€ã€€æ•°æ®åº“ä¸­çš„å­—æ®µæœ‰ï¼š</span><span class="n">tinyint</span><span class="err">ã€</span><span class="n">smallint</span><span class="err">ã€</span><span class="nb">int</span><span class="err">ã€</span><span class="n">bigint</span>
<span class="p">(</span><span class="mi">19</span><span class="p">)</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="err">ã€€ã€€ï¼ƒå­—ç¬¦ä¸²</span><span class="o">=</span><span class="n">longtext</span>
<span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="n">models</span><span class="o">.</span><span class="n">TimeField</span><span class="err">ã€€ã€€ï¼ƒæ—¶é—´</span> <span class="n">HH</span><span class="p">:</span><span class="n">MM</span><span class="p">[:</span><span class="n">ss</span><span class="p">[</span><span class="o">.</span><span class="n">uuuuuu</span><span class="p">]]</span>
<span class="p">(</span><span class="mi">21</span><span class="p">)</span> <span class="n">models</span><span class="o">.</span><span class="n">URLField</span><span class="err">ã€€ã€€ï¼ƒå­—ç¬¦ä¸²ï¼Œåœ°å€æ­£åˆ™è¡¨è¾¾å¼</span>
<span class="p">(</span><span class="mi">22</span><span class="p">)</span> <span class="n">models</span><span class="o">.</span><span class="n">BinaryField</span><span class="err">ã€€ï¼ƒäºŒè¿›åˆ¶</span><span class="o">&lt;</span><span class="n">br</span><span class="o">&gt;</span><span class="mi">23</span><span class="err">ã€</span><span class="n">models</span><span class="o">.</span><span class="n">ImageField</span>   <span class="err">å›¾ç‰‡</span><span class="o">&lt;</span><span class="n">br</span><span class="o">&gt;</span><span class="mi">24</span><span class="err">ã€</span><span class="n">models</span><span class="o">.</span><span class="n">FilePathField</span> <span class="err">æ–‡ä»¶</span>
</pre></div>
</div>
<h3>2.Djangoæ¨¡å‹çš„å­—æ®µå‚æ•°</h3>
<div class="code-wrapper"><div class="lang-label">Python</div><div class="highlight"><pre><span></span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="n">null</span><span class="o">=</span><span class="bp">True</span>
<span class="err">ã€€ã€€æ•°æ®åº“ä¸­å­—æ®µæ˜¯å¦å¯ä»¥ä¸ºç©º</span>
<span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="n">blank</span><span class="o">=</span><span class="bp">True</span>
<span class="err">ã€€ã€€</span><span class="n">django</span><span class="err">çš„</span> <span class="n">Admin</span> <span class="err">ä¸­æ·»åŠ æ•°æ®æ—¶æ˜¯å¦å¯å…è®¸ç©ºå€¼</span>
<span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="n">primary_key</span> <span class="o">=</span> <span class="bp">False</span>
<span class="err">ã€€ã€€ä¸»é”®ï¼Œå¯¹</span><span class="n">AutoField</span><span class="err">è®¾ç½®ä¸»é”®åï¼Œå°±ä¼šä»£æ›¿åŸæ¥çš„è‡ªå¢</span> <span class="nb">id</span> <span class="err">åˆ—</span>
<span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="n">auto_now</span> <span class="err">å’Œ</span> <span class="n">auto_now_add</span>
<span class="err">ã€€ã€€</span><span class="n">auto_now</span>      <span class="c1">#è‡ªåŠ¨åˆ›å»º---æ— è®ºæ·»åŠ æˆ–ä¿®æ”¹ï¼Œéƒ½æ˜¯å½“å‰æ“ä½œçš„æ—¶é—´</span>
<span class="err">ã€€ã€€</span><span class="n">auto_now_add</span>  <span class="c1">#è‡ªåŠ¨åˆ›å»º---æ°¸è¿œæ˜¯åˆ›å»ºæ—¶çš„æ—¶é—´</span>
<span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="n">choices</span>
    <span class="n">GENDER_CHOICE</span> <span class="o">=</span> <span class="p">(</span>
            <span class="p">(</span><span class="sa">u</span><span class="s1">&#39;M&#39;</span><span class="p">,</span> <span class="sa">u</span><span class="s1">&#39;Male&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="sa">u</span><span class="s1">&#39;F&#39;</span><span class="p">,</span> <span class="sa">u</span><span class="s1">&#39;Female&#39;</span><span class="p">),</span>
        <span class="p">)</span>
    <span class="n">gender</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">choices</span> <span class="o">=</span> <span class="n">GENDER_CHOICE</span><span class="p">)</span>
<span class="p">(</span><span class="mi">6</span><span class="p">)</span><span class="n">max_length</span>
<span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="n">default</span><span class="err">ã€€</span>     <span class="err">ã€€</span><span class="c1">#é»˜è®¤å€¼</span>
<span class="p">(</span><span class="mi">8</span><span class="p">)</span><span class="n">verbose_name</span><span class="err">ã€€ã€€</span><span class="c1">#Adminä¸­å­—æ®µçš„æ˜¾ç¤ºåç§°</span>
<span class="p">(</span><span class="mi">9</span><span class="p">)</span><span class="n">name</span><span class="o">|</span><span class="n">db_column</span><span class="err">ã€€</span><span class="c1">#æ•°æ®åº“ä¸­çš„å­—æ®µåç§°</span>
<span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="n">unique</span><span class="o">=</span><span class="bp">True</span><span class="err">ã€€ã€€</span><span class="c1">#ä¸å…è®¸é‡å¤</span>
<span class="p">(</span><span class="mi">11</span><span class="p">)</span><span class="n">db_index</span> <span class="o">=</span> <span class="bp">True</span><span class="err">ã€€</span>   <span class="c1">#æ•°æ®åº“ç´¢å¼•</span>
<span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="n">editable</span><span class="o">=</span><span class="bp">True</span><span class="err">ã€€</span>   <span class="err">ã€€</span><span class="c1">#åœ¨Adminé‡Œæ˜¯å¦å¯ç¼–è¾‘</span>
<span class="p">(</span><span class="mi">13</span><span class="p">)</span><span class="n">error_messages</span><span class="o">=</span><span class="bp">None</span> <span class="c1">#é”™è¯¯æç¤º,error_messges={&quot;invalid&quot;:&quot;æ•°æ®æ—¥æœŸé”™è¯¯&quot;} ä¿®æ”¹forméªŒè¯çš„é”™è¯¯æç¤º</span>
<span class="p">(</span><span class="mi">14</span><span class="p">)</span><span class="n">auto_created</span><span class="o">=</span><span class="bp">False</span><span class="err">ã€€</span><span class="c1">#è‡ªåŠ¨åˆ›å»º</span>
<span class="p">(</span><span class="mi">15</span><span class="p">)</span><span class="n">help_text</span><span class="err">ã€€ã€€</span> <span class="c1">#åœ¨Adminä¸­æç¤ºå¸®åŠ©ä¿¡æ¯</span>
<span class="p">(</span><span class="mi">16</span><span class="p">)</span><span class="n">validators</span><span class="o">=</span><span class="p">[]</span> <span class="c1">#è‡ªå®šä¹‰æ­£åˆ™ </span>
<span class="p">(</span><span class="mi">17</span><span class="p">)</span><span class="n">upload</span><span class="o">-</span><span class="n">to</span>     <span class="c1">#ä¸Šä¼ æ–‡ä»¶ç®€å•æ–¹æ³• file = models.FileField(upload_to = &#39;./upload/&#39;)</span>
</pre></div>
</div>
<h3>3.æ•°æ®åº“ä¸­è¡¨ä¸è¡¨ä¹‹é—´çš„å…³ç³»</h3>
<div class="code-wrapper">
          <div class="lang-label">Raw</div>
        
<div class="highlight"><pre>ä¸€å¯¹ä¸€ï¼Œmodels.OneToOneField(OneModel) :å…³è”çš„2è¡¨çš„æ•°æ®è¦ä¸€ä¸€å¯¹åº”,æ•°æ®æ¡ç›®æ•°é‡ç­‰åŒ,å¹¶ä¸è¦æ±‚å†…å®¹ä¸€æ ·,ä½†æ˜¯æ¯åœ¨è®¾å®šä¸€å¯¹ä¸€å…³è”çš„è¡¨ä¸­æ·»åŠ ä¸€æ¡è®°å½•,é‚£ä¹ˆåŒæ—¶éœ€è¦åœ¨è¢«å…³è”çš„è¡¨ä¸­æ·»åŠ ä¸€æ¡è®°å½•ä¸æ­¤æ¡è®°å½•å¯¹åº”ï¼›
ä¸€å¯¹å¤šï¼Œmodels.ForeignKey(ColorDic) :ä¸€å¼ è¡¨çš„å­—æ®µå†…å®¹å¿…é¡»åœ¨å¦å¤–ä¸€å¼ è¡¨ä¸­å­˜åœ¨
å¤šå¯¹å¤šï¼Œauthors = models.ManyToManyField(Author) :éœ€è¦ä½¿ç”¨ç¬¬3å¼ è¡¨å®ç°å¤šå¯¹å¤šå…³ç³»,Djangoä¼šè‡ªåŠ¨ä¸ºæˆ‘ä»¬ç”Ÿæˆè¿™å¼ è¡¨

åº”ç”¨åœºæ™¯ï¼š
ä¸€å¯¹ä¸€ï¼šåœ¨æŸè¡¨ä¸­åˆ›å»ºä¸€è¡Œæ•°æ®æ—¶ï¼Œæœ‰ä¸€ä¸ªå•é€‰çš„ä¸‹æ‹‰æ¡†ï¼ˆä¸‹æ‹‰æ¡†ä¸­çš„å†…å®¹è¢«ç”¨è¿‡ä¸€æ¬¡å°±æ¶ˆå¤±äº†ï¼‰
ä¾‹å¦‚ï¼šåŸæœ‰å«10åˆ—æ•°æ®çš„ä¸€å¼ è¡¨ä¿å­˜ç›¸å…³ä¿¡æ¯ï¼Œç»è¿‡ä¸€æ®µæ—¶é—´ä¹‹å10åˆ—æ— æ³•æ»¡è¶³éœ€æ±‚ï¼Œéœ€è¦ä¸ºåŸæ¥çš„è¡¨å†æ·»åŠ 5åˆ—æ•°æ®
ä¸€å¯¹å¤šï¼šå½“ä¸€å¼ è¡¨ä¸­åˆ›å»ºä¸€è¡Œæ•°æ®æ—¶ï¼Œæœ‰ä¸€ä¸ªå•é€‰çš„ä¸‹æ‹‰æ¡†ï¼ˆå¯ä»¥è¢«é‡å¤é€‰æ‹©ï¼‰
ä¾‹å¦‚ï¼šåˆ›å»ºç”¨æˆ·ä¿¡æ¯æ—¶å€™ï¼Œéœ€è¦é€‰æ‹©ä¸€ä¸ªç”¨æˆ·ç±»å‹ã€æ™®é€šç”¨æˆ·ã€‘ã€é‡‘ç‰Œç”¨æˆ·ã€‘ã€é“‚é‡‘ç”¨æˆ·ã€‘ç­‰
å¤šå¯¹å¤šï¼šåœ¨æŸè¡¨ä¸­åˆ›å»ºä¸€è¡Œæ•°æ®æ˜¯ï¼Œæœ‰ä¸€ä¸ªå¯ä»¥å¤šé€‰çš„ä¸‹æ‹‰æ¡†
ä¾‹å¦‚ï¼šåˆ›å»ºç”¨æˆ·ä¿¡æ¯ï¼Œéœ€è¦ä¸ºç”¨æˆ·æŒ‡å®šå¤šä¸ªçˆ±å¥½</pre></div></div>

<h3>4.å°†ModelsåŠ å…¥åˆ°Adminä¸­ç®¡ç†</h3>
<div class="code-wrapper">
          <div class="lang-label">Raw</div>
        
<div class="highlight"><pre>1.ä¿®æ”¹settingsæ–‡ä»¶ï¼Œå°†APPçš„åç§°åŠ å…¥INSTALL_APPSä¸­
2.ä¿®æ”¹æ¯ä¸€ä¸ªAPPç›®å½•çš„admin.pyæ–‡ä»¶
    from django.contrib import admin
    from app.models import UserInfo
    admin.site.register(UserInfo)
3.é‡æ–°runserver
    ç™»å½•http://127.0.0.1:8000/admin/ä¼šçœ‹åˆ°å¤šå‡ºæ¥çš„UserInfoç®¡ç†å…¥å£ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±å¯ä»¥ç›´æ¥é€šè¿‡Adminåæ¥è¿›è¡Œæ•°æ®çš„å¢åˆ æ”¹æŸ¥äº†

æ€»è€Œè¨€ä¹‹ï¼Œåœ¨è¡¨ç»“æ„è®¾è®¡ä¹‹åˆå°±æŠŠè¡¨çš„å…³ç³»è€ƒè™‘æ¸…æ¥šï¼Œå¹¶åº”ç”¨åˆ°modles.pyæ–‡ä»¶çš„åˆ›å»ºä¸­ï¼›è¿™æ ·ä½¿å¾—æˆ‘ä»¬åœ¨adminåå°æ“ä½œæ•°æ®çš„æ—¶å€™æ›´æ–¹ä¾¿ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ç‚¹ä¸‹æ‹‰èœå•å°±å¥½ï¼Œä¹Ÿæ›´å®‰å…¨ï¼Œå› ä¸ºæ•°æ®è¡¨é—´çš„å…³è”å…³ç³»è®¾å®šåï¼Œç”¨æˆ·ä¸èƒ½éšæ„è¾“å…¥ï¼›

4. åˆ›å»ºåå°ç®¡ç†å‘˜è´¦å·

python manage.py createsuperuser</pre></div></div>

<h2>å››.Djangoæ¨¡å‹ä¿®æ”¹åŠæ•°æ®è¿ç§»</h2>
<div class="code-wrapper"><div class="lang-label">Python</div><div class="highlight"><pre><span></span><span class="o">**</span><span class="mf">1.</span><span class="err">æ¨¡å‹ä¿®æ”¹</span><span class="o">**</span>
<span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="p">:</span>
    <span class="n">syncdb</span> <span class="err">ä»…åˆ›å»ºæ•°æ®åº“é‡Œè¿˜æ²¡æœ‰çš„è¡¨ï¼Œå®ƒå¹¶ä¸å¯¹å·²å­˜åœ¨çš„æ•°æ®è¡¨è¿›è¡ŒåŒæ­¥ä¿®æ”¹</span><span class="p">,</span><span class="err">ä¹Ÿä¸å¤„ç†æ•°æ®æ¨¡å‹çš„åˆ é™¤</span>
    <span class="n">makemigrations</span><span class="p">:</span> <span class="err">åŸºäºå½“å‰çš„</span><span class="n">model</span><span class="err">åˆ›å»ºæ–°çš„è¿ç§»ç­–ç•¥æ–‡ä»¶</span>
    <span class="n">migrate</span><span class="p">:</span> <span class="err">ç”¨äºæ‰§è¡Œè¿ç§»åŠ¨ä½œï¼Œå…·æœ‰</span><span class="n">syncdb</span><span class="err">çš„åŠŸèƒ½</span>
    <span class="n">sqlmigrate</span><span class="p">:</span> <span class="err">æ˜¾ç¤ºè¿ç§»çš„</span><span class="n">SQL</span><span class="err">è¯­å¥ï¼Œå…·æœ‰</span><span class="n">sqlall</span><span class="err">çš„åŠŸèƒ½</span>
<span class="err">ä½¿ç”¨æ–¹æ³•ï¼š</span>
    <span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="err">ä¿®æ”¹æ•°æ®åº“è¡¨ç»“æ„ï¼šä¿®æ”¹æ¨¡å‹ï¼</span><span class="n">makemigrations</span><span class="err">åˆ›å»ºæ–°çš„è¿ç§»ç­–ç•¥æ–‡ä»¶ï¼</span><span class="n">migrate</span>
    <span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="err">ä½¿ç”¨</span><span class="n">migration</span><span class="err">çš„æ–¹å¼ä¿®æ”¹æ•°æ®ï¼š</span>
        <span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">makemigrations</span> <span class="o">--</span><span class="n">empty</span> <span class="n">yourappname</span> <span class="err">ï¼ƒå»ºç«‹ä¸€ä¸ªç©ºçš„</span><span class="n">migration</span><span class="err">æ–‡ä»¶</span>
    <span class="err">ï¼»ä¾‹å­ï¼½</span>
     <span class="c1"># -*- coding: utf-8 -*-</span>
     <span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span><span class="p">,</span> <span class="n">migrations</span>
      
     <span class="k">def</span> <span class="nf">combine_names</span><span class="p">(</span><span class="n">apps</span><span class="p">,</span> <span class="n">schema_editor</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;è‡ªå®šä¹‰å‡½æ•°,ä¿®æ”¹æ•°æ®åº“å†…å®¹&quot;&quot;&quot;</span>
         <span class="n">Person</span> <span class="o">=</span> <span class="n">apps</span><span class="o">.</span><span class="n">get_model</span><span class="p">(</span><span class="s2">&quot;yourappname&quot;</span><span class="p">,</span> <span class="s2">&quot;Person&quot;</span><span class="p">)</span>
         <span class="k">for</span> <span class="n">person</span> <span class="ow">in</span> <span class="n">Person</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">():</span>
             <span class="n">person</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">person</span><span class="o">.</span><span class="n">first_name</span><span class="p">,</span> <span class="n">person</span><span class="o">.</span><span class="n">last_name</span><span class="p">)</span>
             <span class="n">person</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
      
     <span class="k">class</span> <span class="nc">Migration</span><span class="p">(</span><span class="n">migrations</span><span class="o">.</span><span class="n">Migration</span><span class="p">):</span>
      
         <span class="n">dependencies</span> <span class="o">=</span> <span class="p">[</span>
             <span class="p">(</span><span class="s1">&#39;yourappname&#39;</span><span class="p">,</span> <span class="s1">&#39;0001_initial&#39;</span><span class="p">),</span>
         <span class="p">]</span>
      
         <span class="n">operations</span> <span class="o">=</span> <span class="p">[</span>
             <span class="c1">#è°ƒç”¨å‡½æ•°</span>
             <span class="n">migrations</span><span class="o">.</span><span class="n">RunPython</span><span class="p">(</span><span class="n">combine_names</span><span class="p">),</span>
         <span class="p">]</span>

<span class="o">**</span><span class="mf">2.</span><span class="err">æ•°æ®è¿ç§»</span><span class="o">**</span>
    <span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">dumpdata</span> <span class="n">myapp</span> <span class="o">&gt;</span> <span class="n">myapp</span><span class="o">.</span><span class="n">json</span> <span class="c1"># æ•°æ®å¯¼å‡º</span>
    <span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">loaddata</span> <span class="n">myapp</span><span class="o">.</span><span class="n">json</span>  <span class="c1"># æ•°æ®å¯¼å…¥</span>
    <span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">dumpdata</span> <span class="n">auth</span> <span class="o">&gt;</span> <span class="n">auth</span><span class="o">.</span><span class="n">json</span>  <span class="err">ï¼ƒå¯¼å‡ºç”¨æˆ·æ•°æ®</span>
</pre></div>
</div>
<h2>æµ‹è¯•æ ·ä¾‹</h2>

<h3>1.Djangoæ•°æ®åº“è¡¨è®¾è®¡</h3>
<div class="code-wrapper"><div class="lang-label">Python</div><div class="highlight"><pre><span></span><span class="c1">#ä¸€å¯¹ä¸€ï¼Œä¸€å¯¹å¤šï¼Œå¤šå¯¹å¤š</span>
<span class="sb">`vim app/models.py`</span>
<span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">UserBase</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">username</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span><span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">password</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">db_table</span> <span class="o">=</span> <span class="s2">&quot;user_base&quot;</span>
    <span class="k">def</span> <span class="fm">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">username</span>

<span class="k">class</span> <span class="nc">UserInterest</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
<span class="c1">#id = models.AutoField()Â·</span>
<span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span><span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">description</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span><span class="err">Â·</span>
<span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
    <span class="n">db_table</span> <span class="o">=</span> <span class="s2">&quot;user_interest&quot;</span>
<span class="k">def</span> <span class="fm">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>

<span class="k">class</span> <span class="nc">UserGender</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
<span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span><span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">description</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span><span class="err">Â·</span>
<span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
    <span class="n">db_table</span> <span class="o">=</span> <span class="s2">&quot;user_gender&quot;</span>
<span class="k">def</span> <span class="fm">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>

<span class="k">class</span> <span class="nc">UserGroup</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
<span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span><span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">description</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span><span class="err">Â·</span>
<span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
    <span class="n">db_table</span> <span class="o">=</span> <span class="s2">&quot;user_group&quot;</span>
<span class="k">def</span> <span class="fm">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>

<span class="k">class</span> <span class="nc">UserInfo</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
<span class="n">userpass</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">OneToOneField</span><span class="p">(</span><span class="n">UserBase</span><span class="p">)</span>
<span class="n">username</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span><span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">password</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
<span class="n">gender</span>   <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">UserGender</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">email</span>    <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">interest</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">UserInterest</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">group</span>    <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ManyToManyField</span><span class="p">(</span><span class="n">UserGroup</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">created</span>  <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now_add</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">updated</span>  <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">is_valid</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
    <span class="n">db_table</span> <span class="o">=</span> <span class="s2">&quot;user_info&quot;</span>
<span class="k">def</span> <span class="fm">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">username</span>

<span class="sb">`vim  app/admin.py`</span>
<span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>
<span class="kn">from</span> <span class="nn">app.models</span> <span class="kn">import</span> <span class="n">UserInfo</span><span class="p">,</span><span class="n">UserBase</span><span class="p">,</span><span class="n">UserInterest</span><span class="p">,</span><span class="n">UserGender</span><span class="p">,</span><span class="n">UserGroup</span>

<span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">UserInfo</span><span class="p">)</span>
<span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">UserBase</span><span class="p">)</span>
<span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">UserInterest</span><span class="p">)</span>
<span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">UserGender</span><span class="p">)</span>
<span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">UserGroup</span><span class="p">)</span>
</pre></div>
</div><div class="code-wrapper">
          <div class="lang-label">Raw</div>
        
<div class="highlight"><pre>#python manage runserver ç™»å½•adminåå°ç®¡ç†ç•Œé¢ï¼Œå‘ç°è®¾å®šçš„è¡¨éƒ½å¯ä»¥è¢«åå°ç®¡ç†äº†ï¼Œå“ˆå“ˆï¼Œèµï¼</pre></div></div>

<p><p class="hassubimage"><img src="http://iwillb.imdancer.com/django_admin_modle_test.png"></p>
                    <p class="img-title"><span class="symbol">#</span>adminåå°ç®¡ç†ç•Œé¢</p></p>

<h3>2. Djangoæ•°æ®åº“æ“ä½œ</h3>
<div class="code-wrapper"><div class="lang-label">Python</div><div class="highlight"><pre><span></span><span class="c1">#åŸºäºä¸Šé¢çš„ä¾‹å­åšå¢åˆ æ”¹æŸ¥</span>
 <span class="sb">`vim app/urls.py`</span>
<span class="kn">from</span> <span class="nn">django.conf.urls</span> <span class="kn">import</span> <span class="n">url</span>
<span class="kn">from</span> <span class="nn">views</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1">#url(r&#39;uer_ser/$&#39;, uer_ser),</span>
    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;uer_add/(?P&lt;username&gt;.*)/(?P&lt;password&gt;.*)/$&#39;</span><span class="p">,</span> <span class="n">user_add</span><span class="p">),</span>
    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;uer_del/(?P&lt;username&gt;.*)/(?P&lt;password&gt;.*)/$&#39;</span><span class="p">,</span> <span class="n">user_del</span><span class="p">),</span>
    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;uer_upd/(?P&lt;username&gt;.*)/(?P&lt;password&gt;.*)/$&#39;</span><span class="p">,</span> <span class="n">user_upd</span><span class="p">),</span>
    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;uer_ser/(?P&lt;username&gt;.*)/(?P&lt;password&gt;.*)/$&#39;</span><span class="p">,</span> <span class="n">user_ser</span><span class="p">),</span>
    <span class="c1">#url(r&#39;(?P&lt;filename&gt;.*)/(?P&lt;funcname&gt;.*)/$&#39;, reflex),</span>
    <span class="c1">#url(r&#39;(\d{1,2})/(\d{1,2})/$&#39;, add),</span>
    <span class="c1">#url(r&#39;(?P&lt;num01&gt;\d{1,2})/(?P&lt;num02&gt;\d{1,2})/$&#39;, add, {&quot;num02&quot;:20}),</span>
<span class="p">]</span>    

<span class="sb">`vim app/views.py`</span>
<span class="k">def</span> <span class="nf">user_add</span><span class="p">(</span><span class="n">request</span><span class="p">,</span><span class="n">username</span><span class="p">,</span><span class="n">password</span><span class="p">):</span>
<span class="n">will</span> <span class="o">=</span> <span class="n">UserBase</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s2">&quot;14&quot;</span><span class="p">)</span><span class="err">Â·</span>
<span class="n">gender</span> <span class="o">=</span> <span class="n">UserGender</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;boy&quot;</span><span class="p">)</span>
<span class="n">interest</span> <span class="o">=</span> <span class="n">UserInterest</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;ç¯®çƒ&quot;</span><span class="p">)</span>
<span class="c1">#group = UserGroup.objects.get(name=&quot;è¿ç»´&quot;)</span>
<span class="c1">#print group</span>
<span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;userpass&quot;</span><span class="p">:</span><span class="n">will</span><span class="p">,</span><span class="s2">&quot;username&quot;</span><span class="p">:</span><span class="n">username</span><span class="p">,</span>
        <span class="s2">&quot;password&quot;</span><span class="p">:</span><span class="n">password</span><span class="p">,</span><span class="s2">&quot;gender&quot;</span><span class="p">:</span><span class="n">gender</span><span class="p">,</span>
        <span class="s2">&quot;email&quot;</span><span class="p">:</span><span class="s2">&quot;xiang.dai@shuyun.com&quot;</span><span class="p">,</span>
        <span class="s2">&quot;interest&quot;</span><span class="p">:</span><span class="n">interest</span><span class="p">}</span>
<span class="n">obj</span> <span class="o">=</span> <span class="n">UserInfo</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="k">print</span> <span class="n">obj</span><span class="p">,</span><span class="nb">type</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
<span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">obj</span><span class="p">))</span>

<span class="k">def</span> <span class="nf">user_del</span><span class="p">(</span><span class="n">request</span><span class="p">,</span><span class="n">username</span><span class="p">,</span><span class="n">password</span><span class="p">):</span>
    <span class="n">obj</span> <span class="o">=</span> <span class="n">UserInfo</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">username</span><span class="p">,</span><span class="n">password</span><span class="o">=</span><span class="n">password</span><span class="p">)</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
    <span class="k">print</span> <span class="n">obj</span>
    <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">obj</span><span class="p">))</span>

<span class="k">def</span> <span class="nf">user_upd</span><span class="p">(</span><span class="n">request</span><span class="p">,</span><span class="n">username</span><span class="p">,</span><span class="n">password</span><span class="p">):</span>
    <span class="n">obj</span> <span class="o">=</span> <span class="n">UserInfo</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">username</span><span class="p">,</span><span class="n">password</span><span class="o">=</span><span class="n">password</span><span class="p">)</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s2">&quot;change&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">obj</span><span class="p">))</span>

<span class="k">def</span> <span class="nf">user_ser</span><span class="p">(</span><span class="n">request</span><span class="p">,</span><span class="n">username</span><span class="p">,</span><span class="n">password</span><span class="p">):</span>
    <span class="n">user_info</span> <span class="o">=</span> <span class="n">UserInfo</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">username</span><span class="p">,</span><span class="n">password</span><span class="o">=</span><span class="n">password</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="s2">&quot;username&quot;</span><span class="p">,</span><span class="s2">&quot;password&quot;</span><span class="p">)</span>
    <span class="k">print</span> <span class="n">user_info</span><span class="o">.</span><span class="n">query</span>
    <span class="n">lis</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">user_info</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">lis</span><span class="p">))</span>
</pre></div>
</div>
<h3>3. Djangoä¸Šä¼ æ–‡ä»¶</h3>
<div class="code-wrapper"><div class="lang-label">Python</div><div class="highlight"><pre><span></span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="n">vim</span> <span class="n">app</span><span class="o">/</span><span class="n">urls</span><span class="o">.</span><span class="n">py</span>
    <span class="kn">from</span> <span class="nn">django.conf.urls</span> <span class="kn">import</span> <span class="n">url</span>
    <span class="kn">from</span> <span class="nn">views</span> <span class="kn">import</span> <span class="o">*</span>
    <span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;upload/$&#39;</span><span class="p">,</span><span class="n">uploadfile</span><span class="p">),</span>
    <span class="p">]</span>        

<span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="n">vim</span> <span class="n">app</span><span class="o">/</span><span class="n">views</span><span class="o">.</span><span class="n">py</span>
    <span class="kn">from</span> <span class="nn">form.forms</span> <span class="kn">import</span> <span class="o">*</span> <span class="err">ï¼ƒè¡¨å•</span>
    <span class="kn">from</span> <span class="nn">django.template</span> <span class="kn">import</span> <span class="n">RequestContext</span> <span class="err">ï¼ƒè§£å†³</span><span class="n">CSRF</span><span class="err">è·¨åŸŸæŠ¥é”™</span>
    
    <span class="k">def</span> <span class="nf">uploadfile</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;POST&#39;</span><span class="p">:</span>
            <span class="n">ff</span> <span class="o">=</span> <span class="n">FileForm</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="p">,</span><span class="n">request</span><span class="o">.</span><span class="n">FILES</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">ff</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
                <span class="c1">#å†™å…¥æ•°æ®åº“</span>
                <span class="n">uf</span> <span class="o">=</span> <span class="n">UploadFile</span><span class="p">()</span>
                <span class="n">uf</span><span class="o">.</span><span class="n">userid</span> <span class="o">=</span> <span class="n">ff</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s1">&#39;userid&#39;</span><span class="p">]</span>
                <span class="n">uf</span><span class="o">.</span><span class="n">filedir</span> <span class="o">=</span> <span class="n">ff</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s1">&#39;filedir&#39;</span><span class="p">]</span>
                <span class="n">uf</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
                <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="s1">&#39;upload ok!&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ff</span> <span class="o">=</span> <span class="n">FileForm</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">render_to_response</span><span class="p">(</span><span class="s1">&#39;index.html&#39;</span><span class="p">,</span><span class="n">RequestContext</span><span class="p">(</span><span class="n">request</span><span class="p">,{</span><span class="s1">&#39;form&#39;</span><span class="p">:</span><span class="n">ff</span><span class="p">}))</span>
</pre></div>
</div><div class="code-wrapper">
          <div class="lang-label">Raw</div>
        
<div class="highlight"><pre>(3)æ¨¡ç‰ˆè®¾å®š</pre></div></div>
<div class="code-wrapper"><div class="lang-label">Python</div><div class="highlight"><pre><span></span><span class="sb">`vim app/templates/base.html`</span>

<span class="o">&lt;</span><span class="err">!</span><span class="n">DOCTYPE</span> <span class="n">html</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">html</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">head</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">meta</span> <span class="n">charset</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s2">&quot;X-UA-Compatible&quot;</span> <span class="n">content</span><span class="o">=</span><span class="s2">&quot;IE=edge,chrome=1&quot;</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">title</span><span class="o">&gt;</span><span class="p">{</span><span class="o">%</span> <span class="n">block</span> <span class="n">title</span> <span class="o">%</span><span class="p">}</span><span class="n">ShuYun</span><span class="p">{</span><span class="o">%</span> <span class="n">endblock</span> <span class="o">%</span><span class="p">}</span><span class="o">-</span><span class="err">ä¸Šä¼ æ–‡ä»¶æµ‹è¯•</span><span class="o">&lt;/</span><span class="n">title</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">meta</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;description&quot;</span> <span class="n">content</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">meta</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;keywords&quot;</span> <span class="n">content</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">link</span> <span class="n">href</span><span class="o">=</span><span class="s2">&quot;http://iwillb.imdancer.com/jquery-ui.css&quot;</span> <span class="n">rel</span><span class="o">=</span><span class="s2">&quot;stylesheet&quot;</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">link</span> <span class="n">rel</span><span class="o">=</span><span class="s2">&quot;stylesheet&quot;</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;text/css&quot;</span> <span class="n">href</span><span class="o">=</span><span class="s2">&quot;https://dn-omem.qbox.me/reports/css/semantic.css&quot;</span><span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="n">script</span> <span class="n">src</span><span class="o">=</span><span class="s2">&quot;http://cdn.bootcss.com/jquery/1.11.2/jquery.min.js&quot;</span><span class="o">&gt;&lt;/</span><span class="n">script</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">script</span> <span class="n">src</span><span class="o">=</span><span class="s2">&quot;http://cdn.bootcss.com/bootstrap/3.3.4/js/bootstrap.min.js&quot;</span><span class="o">&gt;&lt;/</span><span class="n">script</span><span class="o">&gt;</span>

<span class="p">{</span><span class="o">%</span> <span class="n">block</span> <span class="n">head_style</span> <span class="o">%</span><span class="p">}{</span><span class="o">%</span> <span class="n">endblock</span> <span class="o">%</span><span class="p">}</span>
<span class="o">&lt;/</span><span class="n">head</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">body</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">h1</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;ui center aligned header&quot;</span><span class="o">&gt;&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s2">&quot;/&quot;</span><span class="o">&gt;</span><span class="n">o</span> <span class="p">(</span><span class="err">â—¡â€¿â—¡âœ¿</span><span class="p">)</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;&lt;/</span><span class="n">h1</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;ui top inverted fixed hidden menu&quot;</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="n">a</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;item&quot;</span><span class="o">&gt;&lt;</span><span class="n">h3</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;ui green header&quot;</span><span class="o">&gt;</span><span class="err">ä¸Šä¼ æ–‡ä»¶è¡¨å•æµ‹è¯•</span><span class="o">&lt;/</span><span class="n">h3</span><span class="o">&gt;&lt;/</span><span class="n">a</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="n">a</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;item&quot;</span> <span class="n">href</span><span class="o">=</span><span class="s2">&quot;/controller/&quot;</span><span class="o">&gt;&lt;</span><span class="n">b</span><span class="o">&gt;</span><span class="n">Index</span><span class="o">&lt;/</span><span class="n">b</span><span class="o">&gt;&lt;/</span><span class="n">a</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;right menu&quot;</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">a</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;item&quot;</span> <span class="n">href</span><span class="o">=</span><span class="s2">&quot;/controller/admin/&quot;</span><span class="o">&gt;</span><span class="n">Admin</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">a</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;item&quot;</span><span class="o">&gt;</span><span class="n">Help</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;</span>
      <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
<span class="p">{</span><span class="o">%</span> <span class="n">include</span> <span class="s1">&#39;nav.html&#39;</span> <span class="o">%</span><span class="p">}</span>

<span class="p">{</span><span class="o">%</span> <span class="n">block</span> <span class="n">content</span> <span class="o">%</span><span class="p">}</span><span class="o">&lt;</span><span class="n">div</span><span class="o">&gt;</span><span class="err">é»˜è®¤å†…å®¹</span><span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span><span class="p">{</span><span class="o">%</span> <span class="n">endblock</span> <span class="o">%</span><span class="p">}</span>

<span class="p">{</span><span class="o">%</span> <span class="n">include</span> <span class="s1">&#39;bottom.html&#39;</span> <span class="o">%</span><span class="p">}</span>
<span class="p">{</span><span class="o">%</span> <span class="n">include</span> <span class="s1">&#39;count.html&#39;</span> <span class="o">%</span><span class="p">}</span>

   <span class="o">&lt;</span><span class="n">script</span> <span class="n">src</span><span class="o">=</span><span class="s2">&quot;http://iwillb.imdancer.com/jquery.js&quot;</span><span class="o">&gt;&lt;/</span><span class="n">script</span><span class="o">&gt;</span>
   <span class="o">&lt;</span><span class="n">script</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;text/javascript&quot;</span> <span class="n">src</span><span class="o">=</span><span class="s2">&quot;http://iwillb.imdancer.com/submit.js&quot;</span><span class="o">&gt;&lt;/</span><span class="n">script</span><span class="o">&gt;</span>
   <span class="o">&lt;</span><span class="n">script</span> <span class="n">src</span><span class="o">=</span><span class="s2">&quot;http://iwillb.imdancer.com/jquery-ui.js&quot;</span><span class="o">&gt;&lt;/</span><span class="n">script</span><span class="o">&gt;</span>
   <span class="p">{</span><span class="o">%</span> <span class="n">block</span> <span class="n">self_script</span> <span class="o">%</span><span class="p">}{</span><span class="o">%</span> <span class="n">endblock</span> <span class="o">%</span><span class="p">}</span>
<span class="o">&lt;/</span><span class="n">body</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">html</span><span class="o">&gt;</span>

<span class="sb">`vim app/templates/index.html`</span>
<span class="p">{</span><span class="o">%</span> <span class="n">extends</span> <span class="s1">&#39;base.html&#39;</span> <span class="o">%</span><span class="p">}</span>

<span class="p">{</span><span class="o">%</span> <span class="n">block</span> <span class="n">content</span> <span class="o">%</span><span class="p">}</span>
<span class="o">&lt;</span><span class="n">div</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span><span class="n">upload</span><span class="o">&lt;/</span><span class="n">h1</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">form</span> <span class="n">method</span><span class="o">=</span><span class="s2">&quot;post&quot;</span> <span class="n">enctype</span><span class="o">=</span><span class="s2">&quot;multipart/form-data&quot;</span> <span class="o">&gt;</span>
        <span class="p">{</span><span class="o">%</span> <span class="n">csrf_token</span> <span class="o">%</span><span class="p">}</span>
        <span class="p">{{</span> <span class="n">form</span><span class="o">.</span><span class="n">as_p</span> <span class="p">}}</span>
        <span class="o">&lt;</span><span class="nb">input</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;submit&quot;</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;ok&quot;</span><span class="o">/&gt;</span>
    <span class="o">&lt;/</span><span class="n">form</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
<span class="p">{</span><span class="o">%</span> <span class="n">endblock</span> <span class="o">%</span><span class="p">}</span>

<span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="n">vim</span> <span class="n">app</span><span class="o">/</span><span class="n">form</span><span class="o">/</span><span class="n">forms</span><span class="o">.</span><span class="n">py</span>
    <span class="kn">from</span> <span class="nn">django</span> <span class="kn">import</span> <span class="n">forms</span>
    <span class="k">class</span> <span class="nc">FileForm</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">Form</span><span class="p">):</span>
        <span class="n">userid</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">CharField</span><span class="p">()</span>
        <span class="n">filedir</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">FileField</span><span class="p">()</span>

<span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="n">vim</span> <span class="n">app</span><span class="o">/</span><span class="n">models</span><span class="o">.</span><span class="n">py</span>
    <span class="k">class</span> <span class="nc">UploadFile</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">userid</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span> <span class="o">=</span> <span class="mi">30</span><span class="p">)</span>
    <span class="n">filedir</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">FileField</span><span class="p">(</span><span class="n">upload_to</span> <span class="o">=</span> <span class="s1">&#39;./upload/&#39;</span><span class="p">)</span>
    <span class="n">date</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now_add</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">db_table</span> <span class="o">=</span> <span class="s2">&quot;user_file&quot;</span>
    <span class="k">def</span> <span class="fm">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">userid</span>
    <span class="c1">#åœ¨æ¨¡å‹ä¸­æˆ‘ä»¬è®¾å®šäº†æ–‡ä»¶å­˜æ”¾çš„è·¯å¾„./upload/,æˆ‘ä»¬éœ€è¦æ‰‹åŠ¨åˆ›å»ºè¯¥ç›®å½•</span>
    <span class="p">(</span><span class="n">willdjango</span><span class="p">)</span> <span class="err">âœ</span> <span class="n">pwd</span>
    <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">daixiang</span><span class="o">/</span><span class="n">mycode</span><span class="o">/</span><span class="n">willdjang</span>
    <span class="n">mkdir</span> <span class="n">upload</span>
</pre></div>
</div>
<p>(6)python manage.py runserver è®¿é—®æµè§ˆå™¨</p>

<p><p class="hassubimage"><img src="http://iwillb.imdancer.com/Django%E5%AD%A6%E4%B9%A0_%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6.png"></p>
</p>

<h1>é—®é¢˜</h1>
<div class="code-wrapper">
          <div class="lang-label">Raw</div>
        
<div class="highlight"><pre># Django Admin åå° updateçš„æ—¶å€™æŠ¥é”™

    1. ä¸€ä¸ªä¸ªå­—æ®µæ”¹, å’³å’³, è¿™æ ·å¤ªå‚»
    ALTER TABLE django_admin_log MODIFY COLUMN object_repr VARCHAR(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL; 

    2.åœ¨åˆ›å»ºæ•°æ®åº“æ—¶, è®¾å®šutf8ç¼–ç , è¦ä¸ç„¶åç»­ä¼šæœ‰å¾ˆå¤šç¼–ç çš„é—®é¢˜;
    create database accounting default character set utf8;

# Django migrateæ—¶ APP modelå¹¶ä¸ç”Ÿæ•ˆ

    python manage.py makemigrations accouting_app
    python manage.py migrate

# åˆ›å»ºè¶…çº§ç®¡ç†å‘˜è´¦æˆ·

    python manage.py createsuperuser

# åœ¨project/settings.pyæ–‡ä»¶ä¸­è®¾ç½®è¯­è¨€ 

    LANGUAGE_CODE = 'zh-hans'</pre></div></div>

    </div>
    <div id="donate" style="text-align: center;">
        <a href="#donation-wrapper"><div onclick="displayDonation()" class="ui basic green button">æ‰“èµ <i class="red heart icon"></i></div></a>
    </div>
    <div id="comments">
    </div>
    <div id="more-words">
        <a href="/#entrys"><div id="more-words">MORE WORDS</div></a>
    </div>
</div>

        </div>

        <div id="footer" class="footer code">
            <span>Â© 1994 - 2018 willdx</span><b>@</b><a class="code" href="https://github.com/willdx/willdx.github.io">blog.willdx.me</a>
            <br/>
            <span class="notprint">
                <span id="busuanzi_container_site_pv">
                    <i class="eye icon"></i><span id="busuanzi_value_site_pv" class="orange text"></span> pv
                </span>
                <b> | </b>
                <span id="busuanzi_container_site_uv">
                    <i class="user icon"></i><span id="busuanzi_value_site_uv" class="orange text"></span> uv
                </span>
                <br/>
            </span>
            <span>Power by <i class="github alternate icon"></i><a href="https://github.com/willdx/willdx.github.io">Github Page</a></span>
            <br/>
            <i class="green superpowers icon"></i>
        </div>
    </body>
    
    
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <script src="/assets/js/web.js"></script>
    <script>
        // ç»Ÿè®¡ä»£ç 
        var skin = localStorage.getItem('skin');

        if (skin) {
            document.body.className = skin;
        } else {
            localStorage.setItem('skin', 'sk-default');
        }

        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-68394485-1', 'auto');
        ga('send', 'pageview');

        var wrappers = ["cats-wrapper", "donation-wrapper", "social-links-wrapper", "search-wrapper", "site-wrapper"]

        window.onload = function () {
            useWechat();
        }
    </script>
    
    <script src="/assets/3rd/gitalk.min.js"></script>
    <script>
    const gitalk = new Gitalk({
        clientID: 'de35601f0076c240632f',
        clientSecret: 'b44ba043a5af4818f53dc13d3b4e49b5a28a2a0c',
        repo: 'willdx.github.io',
        owner: 'willdx',
        admin: ['willdx'],
        id: 'Djangoå­¦ä¹ ç¬”è®°05_æ•°æ®åº“å¢åˆ æ”¹æŸ¥', // Ensure uniqueness and length less than 50
        distractionFreeMode: false,  // Facebook-like distraction free mode
        labels: ['gitment'],
        pagerDirection: "last",
	      proxy: 'https://gh-oauth.imsun.net'
    })
      
    gitalk.render('comments')
    </script>


</html>